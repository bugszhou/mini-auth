!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("prop-types"),require("events")):"function"==typeof define&&define.amd?define(["exports","prop-types","events"],e):(t=t||self,function(){var n=t["mini-auth"],r=t["mini-auth"]={};e(r,t.PropTypes,t.EventEmitter),r.noConflict=function(){return t["mini-auth"]=n,r}}())}(this,function(t,e,n){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;var r=function(){this.__data__=[],this.size=0};var o=function(t,e){return t===e||t!=t&&e!=e};var i=function(t,e){for(var n=t.length;n--;)if(o(t[n][0],e))return n;return-1},a=Array.prototype.splice;var u=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():a.call(e,n,1),--this.size,0))};var c=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]};var s=function(t){return i(this.__data__,t)>-1};var f=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=u,l.prototype.get=c,l.prototype.has=s,l.prototype.set=f;var v=l;var p=function(){this.__data__=new v,this.size=0};var h=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var d=function(t){return this.__data__.get(t)};var y=function(t){return this.__data__.has(t)},g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(t,e){return t(e={exports:{}},e.exports),e.exports}var _="object"==typeof g&&g&&g.Object===Object&&g,m="object"==typeof self&&self&&self.Object===Object&&self,w=_||m||Function("return this")(),j=w.Symbol,O=Object.prototype,S=O.hasOwnProperty,k=O.toString,P=j?j.toStringTag:void 0;var E=function(t){var e=S.call(t,P),n=t[P];try{t[P]=void 0;var r=!0}catch(t){}var o=k.call(t);return r&&(e?t[P]=n:delete t[P]),o},T=Object.prototype.toString;var x=function(t){return T.call(t)},C="[object Null]",A="[object Undefined]",M=j?j.toStringTag:void 0;var R=function(t){return null==t?void 0===t?A:C:M&&M in Object(t)?E(t):x(t)};var F=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},D="[object AsyncFunction]",L="[object Function]",N="[object GeneratorFunction]",I="[object Proxy]";var z,W=function(t){if(!F(t))return!1;var e=R(t);return e==L||e==N||e==D||e==I},q=w["__core-js_shared__"],G=(z=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var U=function(t){return!!G&&G in t},B=Function.prototype.toString;var H=function(t){if(null!=t){try{return B.call(t)}catch(t){}try{return t+""}catch(t){}}return""},J=/^\[object .+?Constructor\]$/,K=Function.prototype,V=Object.prototype,$=K.toString,Q=V.hasOwnProperty,Y=RegExp("^"+$.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var X=function(t){return!(!F(t)||U(t))&&(W(t)?Y:J).test(H(t))};var Z=function(t,e){return null==t?void 0:t[e]};var et=function(t,e){var n=Z(t,e);return X(n)?n:void 0},nt=et(w,"Map"),rt=et(Object,"create");var ot=function(){this.__data__=rt?rt(null):{},this.size=0};var it=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},at="__lodash_hash_undefined__",ut=Object.prototype.hasOwnProperty;var ct=function(t){var e=this.__data__;if(rt){var n=e[t];return n===at?void 0:n}return ut.call(e,t)?e[t]:void 0},st=Object.prototype.hasOwnProperty;var ft=function(t){var e=this.__data__;return rt?void 0!==e[t]:st.call(e,t)},lt="__lodash_hash_undefined__";var vt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rt&&void 0===e?lt:e,this};function pt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pt.prototype.clear=ot,pt.prototype.delete=it,pt.prototype.get=ct,pt.prototype.has=ft,pt.prototype.set=vt;var ht=pt;var dt=function(){this.size=0,this.__data__={hash:new ht,map:new(nt||v),string:new ht}};var yt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var gt=function(t,e){var n=t.__data__;return yt(e)?n["string"==typeof e?"string":"hash"]:n.map};var bt=function(t){var e=gt(this,t).delete(t);return this.size-=e?1:0,e};var _t=function(t){return gt(this,t).get(t)};var mt=function(t){return gt(this,t).has(t)};var wt=function(t,e){var n=gt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function jt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}jt.prototype.clear=dt,jt.prototype.delete=bt,jt.prototype.get=_t,jt.prototype.has=mt,jt.prototype.set=wt;var Ot=jt,St=200;var kt=function(t,e){var n=this.__data__;if(n instanceof v){var r=n.__data__;if(!nt||r.length<St-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ot(r)}return n.set(t,e),this.size=n.size,this};function Pt(t){var e=this.__data__=new v(t);this.size=e.size}Pt.prototype.clear=p,Pt.prototype.delete=h,Pt.prototype.get=d,Pt.prototype.has=y,Pt.prototype.set=kt;var Et=Pt,Tt=function(){try{var t=et(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var xt=function(t,e,n){"__proto__"==e&&Tt?Tt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var Ct=function(t,e,n){(void 0===n||o(t[e],n))&&(void 0!==n||e in t)||xt(t,e,n)};var At=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var c=a[t?u:++o];if(!1===n(i[c],c,i))break}return e}}(),Mt=b(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n?w.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=i?i(n):new t.constructor(n);return t.copy(r),r}}),Rt=w.Uint8Array;var Ft=function(t){var e=new t.constructor(t.byteLength);return new Rt(e).set(new Rt(t)),e};var Dt=function(t,e){var n=e?Ft(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Lt=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},Nt=Object.create,It=function(){function t(){}return function(e){if(!F(e))return{};if(Nt)return Nt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var zt=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),Wt=Object.prototype;var qt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Wt)};var Gt=function(t){return"function"!=typeof t.constructor||qt(t)?{}:It(zt(t))};var Ut=function(t){return null!=t&&"object"==typeof t},Bt="[object Arguments]";var Ht=function(t){return Ut(t)&&R(t)==Bt},Jt=Object.prototype,Kt=Jt.hasOwnProperty,Vt=Jt.propertyIsEnumerable,$t=Ht(function(){return arguments}())?Ht:function(t){return Ut(t)&&Kt.call(t,"callee")&&!Vt.call(t,"callee")},Qt=Array.isArray,Yt=9007199254740991;var Xt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Yt};var Zt=function(t){return null!=t&&Xt(t.length)&&!W(t)};var te=function(t){return Ut(t)&&Zt(t)};var ee=function(){return!1},ne=b(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n?w.Buffer:void 0,i=(o?o.isBuffer:void 0)||ee;t.exports=i}),re="[object Object]",oe=Function.prototype,ie=Object.prototype,ae=oe.toString,ue=ie.hasOwnProperty,ce=ae.call(Object);var se=function(t){if(!Ut(t)||R(t)!=re)return!1;var e=zt(t);if(null===e)return!0;var n=ue.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ae.call(n)==ce},fe={};fe["[object Float32Array]"]=fe["[object Float64Array]"]=fe["[object Int8Array]"]=fe["[object Int16Array]"]=fe["[object Int32Array]"]=fe["[object Uint8Array]"]=fe["[object Uint8ClampedArray]"]=fe["[object Uint16Array]"]=fe["[object Uint32Array]"]=!0,fe["[object Arguments]"]=fe["[object Array]"]=fe["[object ArrayBuffer]"]=fe["[object Boolean]"]=fe["[object DataView]"]=fe["[object Date]"]=fe["[object Error]"]=fe["[object Function]"]=fe["[object Map]"]=fe["[object Number]"]=fe["[object Object]"]=fe["[object RegExp]"]=fe["[object Set]"]=fe["[object String]"]=fe["[object WeakMap]"]=!1;var le=function(t){return Ut(t)&&Xt(t.length)&&!!fe[R(t)]};var ve=function(t){return function(e){return t(e)}},pe=b(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n&&_.process,i=function(){try{var t=r&&r.require&&r.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i}),he=pe&&pe.isTypedArray,de=he?ve(he):le;var ye=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},ge=Object.prototype.hasOwnProperty;var be=function(t,e,n){var r=t[e];ge.call(t,e)&&o(r,n)&&(void 0!==n||e in t)||xt(t,e,n)};var _e=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var u=e[i],c=r?r(n[u],t[u],u,n,t):void 0;void 0===c&&(c=t[u]),o?xt(n,u,c):be(n,u,c)}return n};var me=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},we=9007199254740991,je=/^(?:0|[1-9]\d*)$/;var Oe=function(t,e){var n=typeof t;return!!(e=null==e?we:e)&&("number"==n||"symbol"!=n&&je.test(t))&&t>-1&&t%1==0&&t<e},Se=Object.prototype.hasOwnProperty;var ke=function(t,e){var n=Qt(t),r=!n&&$t(t),o=!n&&!r&&ne(t),i=!n&&!r&&!o&&de(t),a=n||r||o||i,u=a?me(t.length,String):[],c=u.length;for(var s in t)!e&&!Se.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Oe(s,c))||u.push(s);return u};var Pe=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Ee=Object.prototype.hasOwnProperty;var Te=function(t){if(!F(t))return Pe(t);var e=qt(t),n=[];for(var r in t)("constructor"!=r||!e&&Ee.call(t,r))&&n.push(r);return n};var xe=function(t){return Zt(t)?ke(t,!0):Te(t)};var Ce=function(t){return _e(t,xe(t))};var Ae=function(t,e,n,r,o,i,a){var u=ye(t,n),c=ye(e,n),s=a.get(c);if(s)Ct(t,n,s);else{var f=i?i(u,c,n+"",t,e,a):void 0,l=void 0===f;if(l){var v=Qt(c),p=!v&&ne(c),h=!v&&!p&&de(c);f=c,v||p||h?Qt(u)?f=u:te(u)?f=Lt(u):p?(l=!1,f=Mt(c,!0)):h?(l=!1,f=Dt(c,!0)):f=[]:se(c)||$t(c)?(f=u,$t(u)?f=Ce(u):F(u)&&!W(u)||(f=Gt(c))):l=!1}l&&(a.set(c,f),o(f,c,r,i,a),a.delete(c)),Ct(t,n,f)}};var Me=function t(e,n,r,o,i){e!==n&&At(n,function(a,u){if(i||(i=new Et),F(a))Ae(e,n,u,r,t,o,i);else{var c=o?o(ye(e,u),a,u+"",e,n,i):void 0;void 0===c&&(c=a),Ct(e,u,c)}},xe)};var Re=function(t){return t};var Fe=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},De=Math.max;var Le=function(t,e,n){return e=De(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=De(r.length-e,0),a=Array(i);++o<i;)a[o]=r[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=r[o];return u[e]=n(a),Fe(t,this,u)}};var Ne=function(t){return function(){return t}},Ie=Tt?function(t,e){return Tt(t,"toString",{configurable:!0,enumerable:!1,value:Ne(e),writable:!0})}:Re,ze=800,We=16,qe=Date.now;var Ge=function(t){var e=0,n=0;return function(){var r=qe(),o=We-(r-n);if(n=r,o>0){if(++e>=ze)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Ie);var Ue=function(t,e){return Ge(Le(t,e,Re),t+"")};var Be=function(t,e,n){if(!F(n))return!1;var r=typeof e;return!!("number"==r?Zt(n)&&Oe(e,n.length):"string"==r&&e in n)&&o(n[e],t)};var He=function(t){return Ue(function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&Be(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,i)}return e})}(function(t,e,n){Me(t,e,n)}),Je=["weapp","aliapp","swan","ttapp"],Ke=["OPTIONS","options","GET","get","HEAD","head","POST","post","PUT","put","DELETE","delete","TRACE","trace","CONNECT","connect"];var Ve=function(t,e){return{value:e,done:!!t}},$e={},Qe={}.toString,Ye=function(t){return Qe.call(t).slice(8,-1)},Xe=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Ye(t)?t.split(""):Object(t)},Ze=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},tn=function(t){return Xe(Ze(t))},en=b(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),nn=b(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),rn=(nn.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),on=function(t,e,n){if(rn(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},an=function(t){return"object"==typeof t?null!==t:"function"==typeof t},un=function(t){if(!an(t))throw TypeError(t+" is not an object!");return t},cn=function(t){try{return!!t()}catch(t){return!0}},sn=!cn(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),fn=en.document,ln=an(fn)&&an(fn.createElement),vn=function(t){return ln?fn.createElement(t):{}},pn=!sn&&!cn(function(){return 7!=Object.defineProperty(vn("div"),"a",{get:function(){return 7}}).a}),hn=function(t,e){if(!an(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!an(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!an(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!an(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},dn=Object.defineProperty,yn={f:sn?Object.defineProperty:function(t,e,n){if(un(t),e=hn(e,!0),un(n),pn)try{return dn(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},gn=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},bn=sn?function(t,e,n){return yn.f(t,e,gn(1,n))}:function(t,e,n){return t[e]=n,t},_n={}.hasOwnProperty,mn=function(t,e){return _n.call(t,e)},wn=function(t,e,n){var r,o,i,a=t&wn.F,u=t&wn.G,c=t&wn.S,s=t&wn.P,f=t&wn.B,l=t&wn.W,v=u?nn:nn[e]||(nn[e]={}),p=v.prototype,h=u?en:c?en[e]:(en[e]||{}).prototype;for(r in u&&(n=e),n)(o=!a&&h&&void 0!==h[r])&&mn(v,r)||(i=o?h[r]:n[r],v[r]=u&&"function"!=typeof h[r]?n[r]:f&&o?on(i,en):l&&h[r]==i?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):s&&"function"==typeof i?on(Function.call,i):i,s&&((v.virtual||(v.virtual={}))[r]=i,t&wn.R&&p&&!p[r]&&bn(p,r,i)))};wn.F=1,wn.G=2,wn.S=4,wn.P=8,wn.B=16,wn.W=32,wn.U=64,wn.R=128;var jn,On=wn,Sn=bn,kn=Math.ceil,Pn=Math.floor,En=function(t){return isNaN(t=+t)?0:(t>0?Pn:kn)(t)},Tn=Math.min,xn=function(t){return t>0?Tn(En(t),9007199254740991):0},Cn=Math.max,An=Math.min,Mn=b(function(t){var e=en["__core-js_shared__"]||(en["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:nn.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Rn=0,Fn=Math.random(),Dn=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Rn+Fn).toString(36))},Ln=Mn("keys"),Nn=function(t){return Ln[t]||(Ln[t]=Dn(t))},In=(jn=!1,function(t,e,n){var r,o=tn(t),i=xn(o.length),a=function(t,e){return(t=En(t))<0?Cn(t+e,0):An(t,e)}(n,i);if(jn&&e!=e){for(;i>a;)if((r=o[a++])!=r)return!0}else for(;i>a;a++)if((jn||a in o)&&o[a]===e)return jn||a||0;return!jn&&-1}),zn=Nn("IE_PROTO"),Wn=function(t,e){var n,r=tn(t),o=0,i=[];for(n in r)n!=zn&&mn(r,n)&&i.push(n);for(;e.length>o;)mn(r,n=e[o++])&&(~In(i,n)||i.push(n));return i},qn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Gn=Object.keys||function(t){return Wn(t,qn)},Un=sn?Object.defineProperties:function(t,e){un(t);for(var n,r=Gn(e),o=r.length,i=0;o>i;)yn.f(t,n=r[i++],e[n]);return t},Bn=en.document,Hn=Bn&&Bn.documentElement,Jn=Nn("IE_PROTO"),Kn=function(){},Vn=function(){var t,e=vn("iframe"),n=qn.length;for(e.style.display="none",Hn.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Vn=t.F;n--;)delete Vn.prototype[qn[n]];return Vn()},$n=Object.create||function(t,e){var n;return null!==t?(Kn.prototype=un(t),n=new Kn,Kn.prototype=null,n[Jn]=t):n=Vn(),void 0===e?n:Un(n,e)},Qn=b(function(t){var e=Mn("wks"),n=en.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:Dn)("Symbol."+t))}).store=e}),Yn=yn.f,Xn=Qn("toStringTag"),Zn=function(t,e,n){t&&!mn(t=n?t:t.prototype,Xn)&&Yn(t,Xn,{configurable:!0,value:e})},tr={};bn(tr,Qn("iterator"),function(){return this});var er=function(t,e,n){t.prototype=$n(tr,{next:gn(1,n)}),Zn(t,e+" Iterator")},nr=function(t){return Object(Ze(t))},rr=Nn("IE_PROTO"),or=Object.prototype,ir=Object.getPrototypeOf||function(t){return t=nr(t),mn(t,rr)?t[rr]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?or:null},ar=Qn("iterator"),ur=!([].keys&&"next"in[].keys()),cr=function(){return this},sr=function(t,e,n,r,o,i,a){er(n,e,r);var u,c,s,f=function(t){if(!ur&&t in h)return h[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",v="values"==o,p=!1,h=t.prototype,d=h[ar]||h["@@iterator"]||o&&h[o],y=d||f(o),g=o?v?f("entries"):y:void 0,b="Array"==e&&h.entries||d;if(b&&(s=ir(b.call(new t)))!==Object.prototype&&s.next&&Zn(s,l,!0),v&&d&&"values"!==d.name&&(p=!0,y=function(){return d.call(this)}),a&&(ur||p||!h[ar])&&bn(h,ar,y),$e[e]=y,$e[l]=cr,o)if(u={values:v?y:f("values"),keys:i?y:f("keys"),entries:g},a)for(c in u)c in h||Sn(h,c,u[c]);else On(On.P+On.F*(ur||p),e,u);return u};sr(Array,"Array",function(t,e){this._t=tn(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Ve(1)):Ve(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");$e.Arguments=$e.Array;for(var fr=Qn("toStringTag"),lr="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),vr=0;vr<lr.length;vr++){var pr=lr[vr],hr=en[pr],dr=hr&&hr.prototype;dr&&!dr[fr]&&bn(dr,fr,pr),$e[pr]=$e.Array}var yr=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:bn(t,r,e[r]);return t},gr=b(function(t){var e=Dn("meta"),n=yn.f,r=0,o=Object.isExtensible||function(){return!0},i=!cn(function(){return o(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},u=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!an(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!mn(t,e)){if(!o(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!mn(t,e)){if(!o(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return i&&u.NEED&&o(t)&&!mn(t,e)&&a(t),t}}}),br=(gr.KEY,gr.NEED,gr.fastKey,gr.getWeak,gr.onFreeze,function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}),_r=function(t,e,n,r){try{return r?e(un(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&un(o.call(t)),e}},mr=Qn("iterator"),wr=Array.prototype,jr=Qn("toStringTag"),Or="Arguments"==Ye(function(){return arguments}()),Sr=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),jr))?n:Or?Ye(e):"Object"==(r=Ye(e))&&"function"==typeof e.callee?"Arguments":r},kr=Qn("iterator"),Pr=nn.getIteratorMethod=function(t){if(null!=t)return t[kr]||t["@@iterator"]||$e[Sr(t)]},Er=b(function(t){var e={},n={},r=t.exports=function(t,r,o,i,a){var u,c,s,f,l,v=a?function(){return t}:Pr(t),p=on(o,i,r?2:1),h=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(void 0===(l=v)||$e.Array!==l&&wr[mr]!==l){for(s=v.call(t);!(c=s.next()).done;)if((f=_r(s,p,c.value,r))===e||f===n)return f}else for(u=xn(t.length);u>h;h++)if((f=r?p(un(c=t[h])[0],c[1]):p(t[h]))===e||f===n)return f};r.BREAK=e,r.RETURN=n}),Tr=Array.isArray||function(t){return"Array"==Ye(t)},xr=Qn("species"),Cr=function(t,e){return new(function(t){var e;return Tr(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Tr(e.prototype)||(e=void 0),an(e)&&null===(e=e[xr])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Ar=function(t,e){var n=1==t,r=2==t,o=3==t,i=4==t,a=6==t,u=5==t||a,c=e||Cr;return function(e,s,f){for(var l,v,p=nr(e),h=Xe(p),d=on(s,f,3),y=xn(h.length),g=0,b=n?c(e,y):r?c(e,0):void 0;y>g;g++)if((u||g in h)&&(v=d(l=h[g],g,p),t))if(n)b[g]=v;else if(v)switch(t){case 3:return!0;case 5:return l;case 6:return g;case 2:b.push(l)}else if(i)return!1;return a?-1:o||i?i:b}},Mr=function(t,e){if(!an(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t},Rr=gr.getWeak,Fr=Ar(5),Dr=Ar(6),Lr=0,Nr=function(t){return t._l||(t._l=new Ir)},Ir=function(){this.a=[]},zr=function(t,e){return Fr(t.a,function(t){return t[0]===e})};Ir.prototype={get:function(t){var e=zr(this,t);if(e)return e[1]},has:function(t){return!!zr(this,t)},set:function(t,e){var n=zr(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=Dr(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var Wr={getConstructor:function(t,e,n,r){var o=t(function(t,i){br(t,o,e,"_i"),t._t=e,t._i=Lr++,t._l=void 0,null!=i&&Er(i,n,t[r],t)});return yr(o.prototype,{delete:function(t){if(!an(t))return!1;var n=Rr(t);return!0===n?Nr(Mr(this,e)).delete(t):n&&mn(n,this._i)&&delete n[this._i]},has:function(t){if(!an(t))return!1;var n=Rr(t);return!0===n?Nr(Mr(this,e)).has(t):n&&mn(n,this._i)}}),o},def:function(t,e,n){var r=Rr(un(e),!0);return!0===r?Nr(t).set(e,n):r[t._i]=n,t},ufstore:Nr},qr=yn.f,Gr=Ar(0),Ur=function(t,e,n,r,o,i){var a=en[t],u=a,c=o?"set":"add",s=u&&u.prototype,f={};return sn&&"function"==typeof u&&(i||s.forEach&&!cn(function(){(new u).entries().next()}))?(u=e(function(e,n){br(e,u,t,"_c"),e._c=new a,null!=n&&Er(n,o,e[c],e)}),Gr("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in s&&(!i||"clear"!=t)&&bn(u.prototype,t,function(n,r){if(br(this,u,t),!e&&i&&!an(n))return"get"==t&&void 0;var o=this._c[t](0===n?0:n,r);return e?this:o})}),i||qr(u.prototype,"size",{get:function(){return this._c.size}})):(u=r.getConstructor(e,t,o,c),yr(u.prototype,n),gr.NEED=!0),Zn(u,t),f[t]=u,On(On.G+On.W+On.F,f),i||r.setStrong(u,t,o),u};Ur("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return Wr.def(Mr(this,"WeakSet"),t,!0)}},Wr,!1,!0);var Br=function(t){On(On.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})};Br("WeakSet");var Hr=function(t){On(On.S,t,{from:function(t){var e,n,r,o,i=arguments[1];return rn(this),(e=void 0!==i)&&rn(i),null==t?new this:(n=[],e?(r=0,o=on(i,arguments[2],2),Er(t,!1,function(t){n.push(o(t,r++))})):Er(t,!1,n.push,n),new this(n))}})};Hr("WeakSet");var Jr=nn.WeakSet,Kr={f:Object.getOwnPropertySymbols},Vr={f:{}.propertyIsEnumerable},$r=Object.assign,Qr=!$r||cn(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=$r({},t)[n]||Object.keys($r({},e)).join("")!=r})?function(t,e){for(var n=nr(t),r=arguments.length,o=1,i=Kr.f,a=Vr.f;r>o;)for(var u,c=Xe(arguments[o++]),s=i?Gn(c).concat(i(c)):Gn(c),f=s.length,l=0;f>l;)u=s[l++],sn&&!a.call(c,u)||(n[u]=c[u]);return n}:$r;b(function(t){var e,n=Ar(0),r=Mr,o=!en.ActiveXObject&&"ActiveXObject"in en,i=gr.getWeak,a=Object.isExtensible,u=Wr.ufstore,c=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},s={get:function(t){if(an(t)){var e=i(t);return!0===e?u(Mr(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return Wr.def(Mr(this,"WeakMap"),t,e)}},f=t.exports=Ur("WeakMap",c,s,Wr,!0,!0);r&&o&&(e=Wr.getConstructor(c,"WeakMap"),Qr(e.prototype,s),gr.NEED=!0,n(["delete","has","get","set"],function(t){var n=f.prototype,r=n[t];Sn(n,t,function(n,o){if(an(n)&&!a(n)){this._f||(this._f=new e);var i=this._f[t](n,o);return"set"==t?this:i}return r.call(this,n,o)})}))});Br("WeakMap"),Hr("WeakMap");var Yr=nn.WeakMap;On(On.S+On.F*!sn,"Object",{defineProperty:yn.f});var Xr=nn.Object,Zr=function(t,e,n){return Xr.defineProperty(t,e,n)};On(On.S+On.F*!sn,"Object",{defineProperties:Un});var to=nn.Object,eo=function(t,e){return to.defineProperties(t,e)},no=qn.concat("length","prototype"),ro={f:Object.getOwnPropertyNames||function(t){return Wn(t,no)}},oo=en.Reflect,io=oo&&oo.ownKeys||function(t){var e=ro.f(un(t)),n=Kr.f;return n?e.concat(n(t)):e},ao=Object.getOwnPropertyDescriptor,uo={f:sn?ao:function(t,e){if(t=tn(t),e=hn(e,!0),pn)try{return ao(t,e)}catch(t){}if(mn(t,e))return gn(!Vr.f.call(t,e),t[e])}},co=function(t,e,n){e in t?yn.f(t,e,gn(0,n)):t[e]=n};On(On.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=tn(t),o=uo.f,i=io(r),a={},u=0;i.length>u;)void 0!==(n=o(r,e=i[u++]))&&co(a,e,n);return a}});var so=nn.Object.getOwnPropertyDescriptors,fo=function(t,e){var n=(nn.Object||{})[t]||Object[t],r={};r[t]=e(n),On(On.S+On.F*cn(function(){n(1)}),"Object",r)},lo=uo.f;fo("getOwnPropertyDescriptor",function(){return function(t,e){return lo(tn(t),e)}});var vo=nn.Object,po=function(t,e){return vo.getOwnPropertyDescriptor(t,e)},ho={f:Qn},yo=yn.f,go=function(t){var e=nn.Symbol||(nn.Symbol={});"_"==t.charAt(0)||t in e||yo(e,t,{value:ho.f(t)})},bo=ro.f,_o={}.toString,mo="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wo={f:function(t){return mo&&"[object Window]"==_o.call(t)?function(t){try{return bo(t)}catch(t){return mo.slice()}}(t):bo(tn(t))}},jo=gr.KEY,Oo=uo.f,So=yn.f,ko=wo.f,Po=en.Symbol,Eo=en.JSON,To=Eo&&Eo.stringify,xo=Qn("_hidden"),Co=Qn("toPrimitive"),Ao={}.propertyIsEnumerable,Mo=Mn("symbol-registry"),Ro=Mn("symbols"),Fo=Mn("op-symbols"),Do=Object.prototype,Lo="function"==typeof Po&&!!Kr.f,No=en.QObject,Io=!No||!No.prototype||!No.prototype.findChild,zo=sn&&cn(function(){return 7!=$n(So({},"a",{get:function(){return So(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Oo(Do,e);r&&delete Do[e],So(t,e,n),r&&t!==Do&&So(Do,e,r)}:So,Wo=function(t){var e=Ro[t]=$n(Po.prototype);return e._k=t,e},qo=Lo&&"symbol"==typeof Po.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Po},Go=function(t,e,n){return t===Do&&Go(Fo,e,n),un(t),e=hn(e,!0),un(n),mn(Ro,e)?(n.enumerable?(mn(t,xo)&&t[xo][e]&&(t[xo][e]=!1),n=$n(n,{enumerable:gn(0,!1)})):(mn(t,xo)||So(t,xo,gn(1,{})),t[xo][e]=!0),zo(t,e,n)):So(t,e,n)},Uo=function(t,e){un(t);for(var n,r=function(t){var e=Gn(t),n=Kr.f;if(n)for(var r,o=n(t),i=Vr.f,a=0;o.length>a;)i.call(t,r=o[a++])&&e.push(r);return e}(e=tn(e)),o=0,i=r.length;i>o;)Go(t,n=r[o++],e[n]);return t},Bo=function(t){var e=Ao.call(this,t=hn(t,!0));return!(this===Do&&mn(Ro,t)&&!mn(Fo,t))&&(!(e||!mn(this,t)||!mn(Ro,t)||mn(this,xo)&&this[xo][t])||e)},Ho=function(t,e){if(t=tn(t),e=hn(e,!0),t!==Do||!mn(Ro,e)||mn(Fo,e)){var n=Oo(t,e);return!n||!mn(Ro,e)||mn(t,xo)&&t[xo][e]||(n.enumerable=!0),n}},Jo=function(t){for(var e,n=ko(tn(t)),r=[],o=0;n.length>o;)mn(Ro,e=n[o++])||e==xo||e==jo||r.push(e);return r},Ko=function(t){for(var e,n=t===Do,r=ko(n?Fo:tn(t)),o=[],i=0;r.length>i;)!mn(Ro,e=r[i++])||n&&!mn(Do,e)||o.push(Ro[e]);return o};Lo||(Sn((Po=function(){if(this instanceof Po)throw TypeError("Symbol is not a constructor!");var t=Dn(arguments.length>0?arguments[0]:void 0),e=function(n){this===Do&&e.call(Fo,n),mn(this,xo)&&mn(this[xo],t)&&(this[xo][t]=!1),zo(this,t,gn(1,n))};return sn&&Io&&zo(Do,t,{configurable:!0,set:e}),Wo(t)}).prototype,"toString",function(){return this._k}),uo.f=Ho,yn.f=Go,ro.f=wo.f=Jo,Vr.f=Bo,Kr.f=Ko,ho.f=function(t){return Wo(Qn(t))}),On(On.G+On.W+On.F*!Lo,{Symbol:Po});for(var Vo="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),$o=0;Vo.length>$o;)Qn(Vo[$o++]);for(var Qo=Gn(Qn.store),Yo=0;Qo.length>Yo;)go(Qo[Yo++]);On(On.S+On.F*!Lo,"Symbol",{for:function(t){return mn(Mo,t+="")?Mo[t]:Mo[t]=Po(t)},keyFor:function(t){if(!qo(t))throw TypeError(t+" is not a symbol!");for(var e in Mo)if(Mo[e]===t)return e},useSetter:function(){Io=!0},useSimple:function(){Io=!1}}),On(On.S+On.F*!Lo,"Object",{create:function(t,e){return void 0===e?$n(t):Uo($n(t),e)},defineProperty:Go,defineProperties:Uo,getOwnPropertyDescriptor:Ho,getOwnPropertyNames:Jo,getOwnPropertySymbols:Ko});var Xo=cn(function(){Kr.f(1)});On(On.S+On.F*Xo,"Object",{getOwnPropertySymbols:function(t){return Kr.f(nr(t))}}),Eo&&On(On.S+On.F*(!Lo||cn(function(){var t=Po();return"[null]"!=To([t])||"{}"!=To({a:t})||"{}"!=To(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(an(e)||void 0!==t)&&!qo(t))return Tr(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!qo(e))return e}),r[1]=e,To.apply(Eo,r)}}),Po.prototype[Co]||bn(Po.prototype,Co,Po.prototype.valueOf),Zn(Po,"Symbol"),Zn(Math,"Math",!0),Zn(en.JSON,"JSON",!0);var Zo=nn.Object.getOwnPropertySymbols;fo("keys",function(){return function(t){return Gn(nr(t))}});var ti,ei=nn.Object.keys,ni=(ti=!0,function(t,e){var n,r,o=String(Ze(t)),i=En(e),a=o.length;return i<0||i>=a?ti?"":void 0:(n=o.charCodeAt(i))<55296||n>56319||i+1===a||(r=o.charCodeAt(i+1))<56320||r>57343?ti?o.charAt(i):n:ti?o.slice(i,i+2):r-56320+(n-55296<<10)+65536});sr(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=ni(e,n),this._i+=t.length,{value:t,done:!1})});var ri,oi,ii,ai=Qn("species"),ui=function(t,e){var n,r=un(t).constructor;return void 0===r||null==(n=un(r)[ai])?e:rn(n)},ci=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},si=en.process,fi=en.setImmediate,li=en.clearImmediate,vi=en.MessageChannel,pi=en.Dispatch,hi=0,di={},yi=function(){var t=+this;if(di.hasOwnProperty(t)){var e=di[t];delete di[t],e()}},gi=function(t){yi.call(t.data)};fi&&li||(fi=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return di[++hi]=function(){ci("function"==typeof t?t:Function(t),e)},ri(hi),hi},li=function(t){delete di[t]},"process"==Ye(si)?ri=function(t){si.nextTick(on(yi,t,1))}:pi&&pi.now?ri=function(t){pi.now(on(yi,t,1))}:vi?(ii=(oi=new vi).port2,oi.port1.onmessage=gi,ri=on(ii.postMessage,ii,1)):en.addEventListener&&"function"==typeof postMessage&&!en.importScripts?(ri=function(t){en.postMessage(t+"","*")},en.addEventListener("message",gi,!1)):ri="onreadystatechange"in vn("script")?function(t){Hn.appendChild(vn("script")).onreadystatechange=function(){Hn.removeChild(this),yi.call(t)}}:function(t){setTimeout(on(yi,t,1),0)});var bi={set:fi,clear:li},_i=bi.set,mi=en.MutationObserver||en.WebKitMutationObserver,wi=en.process,ji=en.Promise,Oi="process"==Ye(wi);function Si(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=rn(e),this.reject=rn(n)}var ki={f:function(t){return new Si(t)}},Pi=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Ei=en.navigator,Ti=Ei&&Ei.userAgent||"",xi=function(t,e){if(un(t),an(e)&&e.constructor===t)return e;var n=ki.f(t);return(0,n.resolve)(e),n.promise},Ci=Qn("species"),Ai=Qn("iterator"),Mi=!1;try{var Ri=[7][Ai]();Ri.return=function(){Mi=!0},Array.from(Ri,function(){throw 2})}catch(t){}var Fi,Di,Li,Ni,Ii,zi,Wi=bi.set,qi=function(){var t,e,n,r=function(){var r,o;for(Oi&&(r=wi.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(Oi)n=function(){wi.nextTick(r)};else if(!mi||en.navigator&&en.navigator.standalone)if(ji&&ji.resolve){var o=ji.resolve(void 0);n=function(){o.then(r)}}else n=function(){_i.call(en,r)};else{var i=!0,a=document.createTextNode("");new mi(r).observe(a,{characterData:!0}),n=function(){a.data=i=!i}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}(),Gi=en.TypeError,Ui=en.process,Bi=Ui&&Ui.versions,Hi=Bi&&Bi.v8||"",Ji=en.Promise,Ki="process"==Sr(Ui),Vi=function(){},$i=Di=ki.f,Qi=!!function(){try{var t=Ji.resolve(1),e=(t.constructor={})[Qn("species")]=function(t){t(Vi,Vi)};return(Ki||"function"==typeof PromiseRejectionEvent)&&t.then(Vi)instanceof e&&0!==Hi.indexOf("6.6")&&-1===Ti.indexOf("Chrome/66")}catch(t){}}(),Yi=function(t){var e;return!(!an(t)||"function"!=typeof(e=t.then))&&e},Xi=function(t,e){if(!t._n){t._n=!0;var n=t._c;qi(function(){for(var r=t._v,o=1==t._s,i=0,a=function(e){var n,i,a,u=o?e.ok:e.fail,c=e.resolve,s=e.reject,f=e.domain;try{u?(o||(2==t._h&&ea(t),t._h=1),!0===u?n=r:(f&&f.enter(),n=u(r),f&&(f.exit(),a=!0)),n===e.promise?s(Gi("Promise-chain cycle")):(i=Yi(n))?i.call(n,c,s):c(n)):s(r)}catch(t){f&&!a&&f.exit(),s(t)}};n.length>i;)a(n[i++]);t._c=[],t._n=!1,e&&!t._h&&Zi(t)})}},Zi=function(t){Wi.call(en,function(){var e,n,r,o=t._v,i=ta(t);if(i&&(e=Pi(function(){Ki?Ui.emit("unhandledRejection",o,t):(n=en.onunhandledrejection)?n({promise:t,reason:o}):(r=en.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=Ki||ta(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},ta=function(t){return 1!==t._h&&0===(t._a||t._c).length},ea=function(t){Wi.call(en,function(){var e;Ki?Ui.emit("rejectionHandled",t):(e=en.onrejectionhandled)&&e({promise:t,reason:t._v})})},na=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Xi(e,!0))},ra=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Gi("Promise can't be resolved itself");(e=Yi(t))?qi(function(){var r={_w:n,_d:!1};try{e.call(t,on(ra,r,1),on(na,r,1))}catch(t){na.call(r,t)}}):(n._v=t,n._s=1,Xi(n,!1))}catch(t){na.call({_w:n,_d:!1},t)}}};Qi||(Ji=function(t){br(this,Ji,"Promise","_h"),rn(t),Fi.call(this);try{t(on(ra,this,1),on(na,this,1))}catch(t){na.call(this,t)}},(Fi=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=yr(Ji.prototype,{then:function(t,e){var n=$i(ui(this,Ji));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Ki?Ui.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Xi(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Li=function(){var t=new Fi;this.promise=t,this.resolve=on(ra,t,1),this.reject=on(na,t,1)},ki.f=$i=function(t){return t===Ji||t===Ni?new Li(t):Di(t)}),On(On.G+On.W+On.F*!Qi,{Promise:Ji}),Zn(Ji,"Promise"),zi="function"==typeof nn[Ii="Promise"]?nn[Ii]:en[Ii],sn&&zi&&!zi[Ci]&&yn.f(zi,Ci,{configurable:!0,get:function(){return this}}),Ni=nn.Promise,On(On.S+On.F*!Qi,"Promise",{reject:function(t){var e=$i(this);return(0,e.reject)(t),e.promise}}),On(On.S+!0*On.F,"Promise",{resolve:function(t){return xi(this===Ni?Ji:this,t)}}),On(On.S+On.F*!(Qi&&function(t,e){if(!e&&!Mi)return!1;var n=!1;try{var r=[7],o=r[Ai]();o.next=function(){return{done:n=!0}},r[Ai]=function(){return o},t(r)}catch(t){}return n}(function(t){Ji.all(t).catch(Vi)})),"Promise",{all:function(t){var e=this,n=$i(e),r=n.resolve,o=n.reject,i=Pi(function(){var n=[],i=0,a=1;Er(t,!1,function(t){var u=i++,c=!1;n.push(void 0),a++,e.resolve(t).then(function(t){c||(c=!0,n[u]=t,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=$i(e),r=n.reject,o=Pi(function(){Er(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}}),On(On.P+On.R,"Promise",{finally:function(t){var e=ui(this,nn.Promise||en.Promise),n="function"==typeof t;return this.then(n?function(n){return xi(e,t()).then(function(){return n})}:t,n?function(n){return xi(e,t()).then(function(){throw n})}:t)}}),On(On.S,"Promise",{try:function(t){var e=ki.f(this),n=Pi(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var oa=nn.Promise;On(On.S,"Array",{isArray:Tr});var ia=nn.Array.isArray;On(On.S,"Date",{now:function(){return(new Date).getTime()}});var aa=nn.Date.now;var ua=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function ca(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Zr(t,r.key,r)}}var sa=function(t,e,n){return e&&ca(t.prototype,e),n&&ca(t,n),t},fa=ho.f("iterator");go("asyncIterator"),go("observable");var la=nn.Symbol,va=b(function(t){function e(t){return(e="function"==typeof la&&"symbol"==typeof fa?function(t){return typeof t}:function(t){return t&&"function"==typeof la&&t.constructor===la&&t!==la.prototype?"symbol":typeof t})(t)}function n(r){return"function"==typeof la&&"symbol"===e(fa)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof la&&t.constructor===la&&t!==la.prototype?"symbol":e(t)},n(r)}t.exports=n});var pa=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var ha=function(t,e){return!e||"object"!==va(e)&&"function"!=typeof e?pa(t):e};fo("getPrototypeOf",function(){return function(t){return ir(nr(t))}});var da=nn.Object.getPrototypeOf,ya=function(t,e){if(un(t),!an(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},ga={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=on(Function.call,uo.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return ya(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:ya};On(On.S,"Object",{setPrototypeOf:ga.set});var ba=nn.Object.setPrototypeOf,_a=b(function(t){function e(n){return t.exports=e=ba?da:function(t){return t.__proto__||da(t)},e(n)}t.exports=e});On(On.S,"Object",{create:$n});var ma=nn.Object,wa=function(t,e){return ma.create(t,e)},ja=b(function(t){function e(n,r){return t.exports=e=ba||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e});var Oa=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=wa(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ja(t,e)};var Sa=function(t,e,n){return e in t?Zr(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};var ka=function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value};var Pa=function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n},Ea=function(t){function e(){var t;return ua(this,e),t=ha(this,_a(e).call(this)),Ta.set(pa(t),{writable:!0,value:{}}),xa.set(pa(t),{writable:!0,value:[]}),Ca.set(pa(t),{writable:!0,value:[]}),Aa.set(pa(t),{writable:!0,value:[]}),t}return Oa(e,n),sa(e,[{key:"config",value:function(){}},{key:"queue",value:function(){}},{key:"use",value:function(){}},{key:"getToken",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isRefresh:!1,withCredentials:!0};t.isRefresh,t.withCredentials}},{key:"getUserInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.rawData,t.signature,t.encryptedData,t.iv}},{key:"addEventListener",value:function(t){}}]),e}(),Ta=new Yr,xa=new Yr,Ca=new Yr,Aa=new Yr,Ma="MINI_AUTH:token:",Ra="".concat(Ma,"beforeRefresh"),Fa="".concat(Ma,"afterRefresh"),Da="".concat(Ma,"beforeCache"),La="".concat(Ma,"afterCache"),Na="".concat(Ma,"expired"),Ia="".concat(Ma,"beforeLogin"),za="".concat(Ma,"afterLogin"),Wa="".concat(Ma,"beforeRequest"),qa="".concat(Ma,"afterRequest"),Ga=nn.JSON||(nn.JSON={stringify:JSON.stringify}),Ua=function(t){return Ga.stringify.apply(Ga,arguments)};On(On.S+On.F,"Object",{assign:Qr});var Ba=nn.Object.assign;function Ha(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.errCode||0;return{errCode:t.errCode||0,errMsg:0===e?"":t.errMsg||Ua(t),status:t.statusCode||t.status||-1,headers:t.header||null,data:t.data||null}}var Ja=function(){function t(){ua(this,t),Sa(this,"context",{}),Sa(this,"middleware",[])}return sa(t,[{key:"createContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=wa(this.context);return Ba(e,t)}},{key:"dispatch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=this.createContext(t),r=this.runMiddleware(e||this.middleware);return r(n)}},{key:"runMiddleware",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(e,n){var r=-1;return new oa(function(o,i){!function a(u,c){if(u<=r)return i(Ha({errCode:5004,errMsg:"next() called multiple times"}));if(c)return i(c);r=u;var s=t[r];r===t.length&&(s=n);if(!s)return o(e);try{return s(e,a.bind(null,r+1))}catch(t){return i(Ha({errCode:5005,errMsg:Ua(t)}))}}(0,null)})}}},{key:"use",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if("function"!=typeof t)throw new Error("middle must be function!");this.middleware.push(t)}},{key:"useBatch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach(function(e){t.use(e)})}}]),t}();var Ka={timeout:2e4,scopes:["auth_base"],force:!0};function Va(){return"undefined"!=typeof wx&&wx?wx:"undefined"!=typeof my&&my?my:"undefined"!=typeof swan&&swan?swan:"undefined"!=typeof tt&&tt?tt:global}var $a=Va();function Qa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},n=t.timeout,r=t.env,o=t.scopes,i=t.force,a=null;switch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.checkPropTypes({timeout:e.number,scopes:e.array,force:e.bool},t)}(He(Ka,{timeout:n,scopes:o,force:i})),r){case"aliapp":a=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scopes:["auth_base"]}).scopes;return new oa(function(e,n){$a.getAuthCode({scopes:t,success:function(t){e({errCode:0,errMsg:"",jsCode:t.authCode})},fail:function(t){n({errCode:5009,errMsg:t.errMsg||Ua(t),jsCode:""})}})})}({scopes:o});break;case"swan":case"ttapp":case"weapp":default:a=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{timeout:2e4}).timeout;return new oa(function(e,n){wx.login({timeout:t,success:function(t){e({errCode:0,errMsg:"",jsCode:t.code})},fail:function(t){n({errCode:5e3,errMsg:t.errMsg||Ua(t),jsCode:""})}})})}({timeout:n})}return a}var Ya={url:"",data:{},headers:{},timeout:3e4,method:"GET"};function Xa(t,e){var n=ei(t);if(Zo){var r=Zo(t);e&&(r=r.filter(function(e){return po(t,e).enumerable})),n.push.apply(n,r)}return n}function Za(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xa(n,!0).forEach(function(e){Sa(t,e,n[e])}):so?eo(t,so(n)):Xa(n).forEach(function(e){Zr(t,e,po(n,e))})}return t}function tu(t,e){var n=ei(t);if(Zo){var r=Zo(t);e&&(r=r.filter(function(e){return po(t,e).enumerable})),n.push.apply(n,r)}return n}function eu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tu(n,!0).forEach(function(e){Sa(t,e,n[e])}):so?eo(t,so(n)):tu(n).forEach(function(e){Zr(t,e,po(n,e))})}return t}var nu=Va();function ru(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},n=t.url,r=t.timeout,o=t.data,i=t.headers,a=t.method,u=t.env,c=null;switch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.checkPropTypes({url:e.string,data:e.object,headers:e.object,timeout:e.number,method:e.string},t)}(He(Ya,{url:n,timeout:r,data:o,headers:i,method:a})),u){case"aliapp":c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{method:"GET",data:{}},e=t.url,n=t.data,r=t.headers,o=t.method,i=t.timeout;return new oa(function(t,a){nu.request({url:e,data:n,headers:r,method:o,timeout:i,success:function(e){t(Ha(eu({errCode:0},e)))},fail:function(t){var e=5006;e=t.errMsg?t.errMsg.toLowerCase().indexOf("timeout")>-1?5007:5008:5006,a(Ha(eu({errCode:e},t)))}})})}({url:n,data:o,headers:i,method:a});break;case"swan":case"ttapp":case"weapp":default:c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{method:"GET",data:{}},e=t.url,n=t.data,r=t.headers,o=t.method;return new oa(function(t,i){wx.request({url:e,data:n,header:r,method:o,success:function(e){t(Ha(Za({errCode:0},e)))},fail:function(t){var e=5003;e=t.errMsg?t.errMsg.toLowerCase().indexOf("timeout")>-1?5001:5002:5003,i(Ha(Za({errCode:e},t)))}})})}({url:n,data:o,header:i,method:a})}return c}var ou=Va(),iu={setStorageSync:ou.setStorageSync.bind(ou),getStorageSync:ou.getStorageSync.bind(ou),removeStorageSync:ou.removeStorageSync.bind(ou)},au=Va(),uu={setStorageSync:au.setStorageSync.bind(au),getStorageSync:au.getStorageSync.bind(au),removeStorageSync:au.removeStorageSync.bind(au)};function cu(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{env:"weapp"}).env;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{switch(t){case"aliapp":uu.setStorageSync({key:e,data:n});break;case"swan":case"ttapp":case"weapp":default:iu.setStorageSync(e,n)}}catch(t){throw t}}}function su(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{env:"weapp"}).env;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=null;try{switch(t){case"aliapp":n=uu.getStorageSync({key:e}).data;break;case"swan":case"ttapp":case"weapp":default:n=iu.getStorageSync(e)}}catch(t){throw t}return n}}function fu(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{env:"weapp"}).env;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{switch(t){case"aliapp":uu.removeStorageSync({key:e});break;case"swan":case"ttapp":case"weapp":default:iu.removeStorageSync(e)}}catch(t){throw t}}}function lu(t,e){var n=ei(t);if(Zo){var r=Zo(t);e&&(r=r.filter(function(e){return po(t,e).enumerable})),n.push.apply(n,r)}return n}function vu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lu(n,!0).forEach(function(e){Sa(t,e,n[e])}):so?eo(t,so(n)):lu(n).forEach(function(e){Zr(t,e,po(n,e))})}return t}function pu(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var hu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ua(this,e),t=ha(this,_a(e).call(this)),Ou.add(pa(t)),ju.add(pa(t)),du.set(pa(t),{writable:!0,value:{}}),yu.set(pa(t),{writable:!0,value:[]}),gu.set(pa(t),{writable:!0,value:[]}),bu.set(pa(t),{writable:!0,value:[]}),_u.set(pa(t),{writable:!0,value:[]}),mu.set(pa(t),{writable:!0,value:68e5}),wu.set(pa(t),{writable:!0,value:!1}),Sa(pa(t),"tokenReqData",{}),Sa(pa(t),"tokenResData",{}),t.middleware=new Ja,Pa(pa(t),du,n),t}return Oa(e,Ea),sa(e,[{key:"use",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if("function"==typeof e)switch(t){case"afterToken":ka(this,bu).push(e);break;case"user":ka(this,_u).push(e);break;case"token":default:ka(this,gu).push(e)}}},{key:"set2Storage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"token",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=pu(this,Ou,ku).call(this,t,e),r=3;return o.call(this,r);function o(t){try{cu({env:ka(this,du).env})(n.key,n.data)}catch(e){console.error(e),t>0&&o.call(this,t-1)}return n.data}}},{key:"getDataFromStorage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"token",e=null;try{e=su({env:ka(this,du).env})(pu(this,ju,Su).call(this,t))}catch(t){console.error(t)}return e}},{key:"clearStorage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"token";try{fu({env:ka(this,du).env})(pu(this,ju,Su).call(this,t))}catch(t){console.error(t)}}},{key:"isExpired",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t){var e=t.expirationTime;return!(e&&e>aa())}return!0}},{key:"setTokenExpires",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t&&!isNaN(t)||(t=68e5),Pa(this,mu,+t)}},{key:"runQueues",value:function(t,e){if(ka(this,yu)&&ia(ka(this,yu))){var n=ka(this,yu).length;ka(this,yu).splice(0,n).forEach(function(n){var r=n.resolve,o=n.reject;return t?o(t):r(e)})}}},{key:"getToken",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isRefresh:!1},n=e.isRefresh,r=e.scopes;return new oa(function(e,o){if(ka(t,wu))return ka(t,yu).push({resolve:e,reject:o});var i=ka(t,du).env,a=ka(t,du).tokenReqConfig,u=a.url,c=a.method,s=null;if(n)t.emit(Ra),t.clearStorage("token"),t.emit(Fa);else{if((s=t.getDataFromStorage("token"))&&!t.isExpired(s))return t.emit(Da,s),setTimeout(function(){e(s),t.emit(La,s)});t.emit(Na),t.clearStorage("token")}t.emit(Ia),Pa(t,wu,!0),Qa({env:i,scopes:r}).then(function(e){return t.tokenReqData.jsCode=e.jsCode,t.emit(za,e),t.middleware.dispatch(t,ka(t,gu))}).then(function(e){return t.emit(Wa),ru({env:i,url:u,method:c,data:vu({},e.tokenReqData)})}).then(function(e){return t.tokenResData=e,t.middleware.dispatch(t,ka(t,bu))}).then(function(e){return t.emit(qa,e.tokenResData),t.set2Storage("token",e.tokenResData)}).then(function(n){e(n),t.runQueues(null,n),Pa(t,wu,!1),Pa(t,yu,[])}).catch(function(e){o(e),t.runQueues(e),Pa(t,wu,!1),Pa(t,yu,[])})})}},{key:"config",get:function(){return ka(this,du)}},{key:"queue",get:function(){return this.waitQueues}}]),e}(),du=new Yr,yu=new Yr,gu=new Yr,bu=new Yr,_u=new Yr,mu=new Yr,wu=new Yr,ju=new Jr,Ou=new Jr,Su=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"token";return"MINI_AUTH:".concat(t,":").concat(ka(this,du).appid)},ku=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"token",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{key:pu(this,ju,Su).call(this,t),data:{data:e,expires:ka(this,mu),expirationTime:aa()+ka(this,mu)}}},Pu={withCredentials:!1,env:"weapp",appid:"mockAppid",tokenReqConfig:{url:"",method:"GET",headers:{"content-type":"application/json"},timeout:1e4},userInfoReqConfig:{url:"",method:"GET",headers:{"content-type":"application/json"},timeout:1e4}};function Eu(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=He(Pu,t);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.checkPropTypes({withCredentials:e.bool.isRequired,env:e.oneOf(Je),appid:e.string,tokenReqConfig:e.shape({url:e.string,method:e.oneOf(Ke).isRequired,headers:e.object,timeout:e.number}),userInfoReqConfig:e.shape({url:e.string,method:e.oneOf(Ke).isRequired,headers:e.object,timeout:e.number})},t)}(n),new hu(n)}var Tu=Eu(Pu);Tu.create=Eu,t.default=hu,t.miniAuth=Tu,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mini-auth.common.js.map
