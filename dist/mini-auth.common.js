!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("prop-types"),require("events")):"function"==typeof define&&define.amd?define(["exports","prop-types","events"],e):(t=t||self,function(){var n=t["mini-auth"],r=t["mini-auth"]={};e(r,t.PropTypes,t.EventEmitter),r.noConflict=function(){return t["mini-auth"]=n,r}}())}(this,function(t,e,n){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;var r=function(){this.__data__=[],this.size=0};var o=function(t,e){return t===e||t!=t&&e!=e};var i=function(t,e){for(var n=t.length;n--;)if(o(t[n][0],e))return n;return-1},u=Array.prototype.splice;var a=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():u.call(e,n,1),--this.size,0))};var c=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]};var f=function(t){return i(this.__data__,t)>-1};var s=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=c,l.prototype.has=f,l.prototype.set=s;var p=l;var v=function(){this.__data__=new p,this.size=0};var h=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var d=function(t){return this.__data__.get(t)};var y=function(t){return this.__data__.has(t)},g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(t,e){return t(e={exports:{}},e.exports),e.exports}var _="object"==typeof g&&g&&g.Object===Object&&g,w="object"==typeof self&&self&&self.Object===Object&&self,m=_||w||Function("return this")(),j=m.Symbol,O=Object.prototype,S=O.hasOwnProperty,k=O.toString,P=j?j.toStringTag:void 0;var E=function(t){var e=S.call(t,P),n=t[P];try{t[P]=void 0;var r=!0}catch(t){}var o=k.call(t);return r&&(e?t[P]=n:delete t[P]),o},T=Object.prototype.toString;var x=function(t){return T.call(t)},A="[object Null]",C="[object Undefined]",M=j?j.toStringTag:void 0;var R=function(t){return null==t?void 0===t?C:A:M&&M in Object(t)?E(t):x(t)};var F=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},D="[object AsyncFunction]",L="[object Function]",N="[object GeneratorFunction]",I="[object Proxy]";var z,W=function(t){if(!F(t))return!1;var e=R(t);return e==L||e==N||e==D||e==I},q=m["__core-js_shared__"],G=(z=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var U=function(t){return!!G&&G in t},B=Function.prototype.toString;var H=function(t){if(null!=t){try{return B.call(t)}catch(t){}try{return t+""}catch(t){}}return""},J=/^\[object .+?Constructor\]$/,K=Function.prototype,V=Object.prototype,$=K.toString,Q=V.hasOwnProperty,Y=RegExp("^"+$.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var X=function(t){return!(!F(t)||U(t))&&(W(t)?Y:J).test(H(t))};var Z=function(t,e){return null==t?void 0:t[e]};var tt=function(t,e){var n=Z(t,e);return X(n)?n:void 0},et=tt(m,"Map"),nt=tt(Object,"create");var rt=function(){this.__data__=nt?nt(null):{},this.size=0};var ot=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},it="__lodash_hash_undefined__",ut=Object.prototype.hasOwnProperty;var at=function(t){var e=this.__data__;if(nt){var n=e[t];return n===it?void 0:n}return ut.call(e,t)?e[t]:void 0},ct=Object.prototype.hasOwnProperty;var ft=function(t){var e=this.__data__;return nt?void 0!==e[t]:ct.call(e,t)},st="__lodash_hash_undefined__";var lt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nt&&void 0===e?st:e,this};function pt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pt.prototype.clear=rt,pt.prototype.delete=ot,pt.prototype.get=at,pt.prototype.has=ft,pt.prototype.set=lt;var vt=pt;var ht=function(){this.size=0,this.__data__={hash:new vt,map:new(et||p),string:new vt}};var dt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var yt=function(t,e){var n=t.__data__;return dt(e)?n["string"==typeof e?"string":"hash"]:n.map};var gt=function(t){var e=yt(this,t).delete(t);return this.size-=e?1:0,e};var bt=function(t){return yt(this,t).get(t)};var _t=function(t){return yt(this,t).has(t)};var wt=function(t,e){var n=yt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function mt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}mt.prototype.clear=ht,mt.prototype.delete=gt,mt.prototype.get=bt,mt.prototype.has=_t,mt.prototype.set=wt;var jt=mt,Ot=200;var St=function(t,e){var n=this.__data__;if(n instanceof p){var r=n.__data__;if(!et||r.length<Ot-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new jt(r)}return n.set(t,e),this.size=n.size,this};function kt(t){var e=this.__data__=new p(t);this.size=e.size}kt.prototype.clear=v,kt.prototype.delete=h,kt.prototype.get=d,kt.prototype.has=y,kt.prototype.set=St;var Pt=kt,Et=function(){try{var t=tt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Tt=function(t,e,n){"__proto__"==e&&Et?Et(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var xt=function(t,e,n){(void 0===n||o(t[e],n))&&(void 0!==n||e in t)||Tt(t,e,n)};var At=function(t){return function(e,n,r){for(var o=-1,i=Object(e),u=r(e),a=u.length;a--;){var c=u[t?a:++o];if(!1===n(i[c],c,i))break}return e}}(),Ct=b(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n?m.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=i?i(n):new t.constructor(n);return t.copy(r),r}}),Mt=m.Uint8Array;var Rt=function(t){var e=new t.constructor(t.byteLength);return new Mt(e).set(new Mt(t)),e};var Ft=function(t,e){var n=e?Rt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Dt=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},Lt=Object.create,Nt=function(){function t(){}return function(e){if(!F(e))return{};if(Lt)return Lt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var It=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),zt=Object.prototype;var Wt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||zt)};var qt=function(t){return"function"!=typeof t.constructor||Wt(t)?{}:Nt(It(t))};var Gt=function(t){return null!=t&&"object"==typeof t},Ut="[object Arguments]";var Bt=function(t){return Gt(t)&&R(t)==Ut},Ht=Object.prototype,Jt=Ht.hasOwnProperty,Kt=Ht.propertyIsEnumerable,Vt=Bt(function(){return arguments}())?Bt:function(t){return Gt(t)&&Jt.call(t,"callee")&&!Kt.call(t,"callee")},$t=Array.isArray,Qt=9007199254740991;var Yt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Qt};var Xt=function(t){return null!=t&&Yt(t.length)&&!W(t)};var Zt=function(t){return Gt(t)&&Xt(t)};var te=function(){return!1},ee=b(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n?m.Buffer:void 0,i=(o?o.isBuffer:void 0)||te;t.exports=i}),ne="[object Object]",re=Function.prototype,oe=Object.prototype,ie=re.toString,ue=oe.hasOwnProperty,ae=ie.call(Object);var ce=function(t){if(!Gt(t)||R(t)!=ne)return!1;var e=It(t);if(null===e)return!0;var n=ue.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ie.call(n)==ae},fe={};fe["[object Float32Array]"]=fe["[object Float64Array]"]=fe["[object Int8Array]"]=fe["[object Int16Array]"]=fe["[object Int32Array]"]=fe["[object Uint8Array]"]=fe["[object Uint8ClampedArray]"]=fe["[object Uint16Array]"]=fe["[object Uint32Array]"]=!0,fe["[object Arguments]"]=fe["[object Array]"]=fe["[object ArrayBuffer]"]=fe["[object Boolean]"]=fe["[object DataView]"]=fe["[object Date]"]=fe["[object Error]"]=fe["[object Function]"]=fe["[object Map]"]=fe["[object Number]"]=fe["[object Object]"]=fe["[object RegExp]"]=fe["[object Set]"]=fe["[object String]"]=fe["[object WeakMap]"]=!1;var se=function(t){return Gt(t)&&Yt(t.length)&&!!fe[R(t)]};var le=function(t){return function(e){return t(e)}},pe=b(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n&&_.process,i=function(){try{var t=r&&r.require&&r.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i}),ve=pe&&pe.isTypedArray,he=ve?le(ve):se;var de=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},ye=Object.prototype.hasOwnProperty;var ge=function(t,e,n){var r=t[e];ye.call(t,e)&&o(r,n)&&(void 0!==n||e in t)||Tt(t,e,n)};var be=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,u=e.length;++i<u;){var a=e[i],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),o?Tt(n,a,c):ge(n,a,c)}return n};var _e=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},we=9007199254740991,me=/^(?:0|[1-9]\d*)$/;var je=function(t,e){var n=typeof t;return!!(e=null==e?we:e)&&("number"==n||"symbol"!=n&&me.test(t))&&t>-1&&t%1==0&&t<e},Oe=Object.prototype.hasOwnProperty;var Se=function(t,e){var n=$t(t),r=!n&&Vt(t),o=!n&&!r&&ee(t),i=!n&&!r&&!o&&he(t),u=n||r||o||i,a=u?_e(t.length,String):[],c=a.length;for(var f in t)!e&&!Oe.call(t,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||je(f,c))||a.push(f);return a};var ke=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Pe=Object.prototype.hasOwnProperty;var Ee=function(t){if(!F(t))return ke(t);var e=Wt(t),n=[];for(var r in t)("constructor"!=r||!e&&Pe.call(t,r))&&n.push(r);return n};var Te=function(t){return Xt(t)?Se(t,!0):Ee(t)};var xe=function(t){return be(t,Te(t))};var Ae=function(t,e,n,r,o,i,u){var a=de(t,n),c=de(e,n),f=u.get(c);if(f)xt(t,n,f);else{var s=i?i(a,c,n+"",t,e,u):void 0,l=void 0===s;if(l){var p=$t(c),v=!p&&ee(c),h=!p&&!v&&he(c);s=c,p||v||h?$t(a)?s=a:Zt(a)?s=Dt(a):v?(l=!1,s=Ct(c,!0)):h?(l=!1,s=Ft(c,!0)):s=[]:ce(c)||Vt(c)?(s=a,Vt(a)?s=xe(a):F(a)&&!W(a)||(s=qt(c))):l=!1}l&&(u.set(c,s),o(s,c,r,i,u),u.delete(c)),xt(t,n,s)}};var Ce=function t(e,n,r,o,i){e!==n&&At(n,function(u,a){if(i||(i=new Pt),F(u))Ae(e,n,a,r,t,o,i);else{var c=o?o(de(e,a),u,a+"",e,n,i):void 0;void 0===c&&(c=u),xt(e,a,c)}},Te)};var Me=function(t){return t};var Re=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Fe=Math.max;var De=function(t,e,n){return e=Fe(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=Fe(r.length-e,0),u=Array(i);++o<i;)u[o]=r[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=r[o];return a[e]=n(u),Re(t,this,a)}};var Le=function(t){return function(){return t}},Ne=Et?function(t,e){return Et(t,"toString",{configurable:!0,enumerable:!1,value:Le(e),writable:!0})}:Me,Ie=800,ze=16,We=Date.now;var qe=function(t){var e=0,n=0;return function(){var r=We(),o=ze-(r-n);if(n=r,o>0){if(++e>=Ie)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Ne);var Ge=function(t,e){return qe(De(t,e,Me),t+"")};var Ue=function(t,e,n){if(!F(n))return!1;var r=typeof e;return!!("number"==r?Xt(n)&&je(e,n.length):"string"==r&&e in n)&&o(n[e],t)};var Be=function(t){return Ge(function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,u&&Ue(n[0],n[1],u)&&(i=o<3?void 0:i,o=1),e=Object(e);++r<o;){var a=n[r];a&&t(e,a,r,i)}return e})}(function(t,e,n){Ce(t,e,n)}),He=["weapp","aliapp","swan","ttapp"],Je=["OPTIONS","options","GET","get","HEAD","head","POST","post","PUT","put","DELETE","delete","TRACE","trace","CONNECT","connect"];var Ke=function(t,e){return{value:e,done:!!t}},Ve={},$e={}.toString,Qe=function(t){return $e.call(t).slice(8,-1)},Ye=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Qe(t)?t.split(""):Object(t)},Xe=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},Ze=function(t){return Ye(Xe(t))},tn=b(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),en=b(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),nn=(en.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),rn=function(t,e,n){if(nn(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},on=function(t){return"object"==typeof t?null!==t:"function"==typeof t},un=function(t){if(!on(t))throw TypeError(t+" is not an object!");return t},an=function(t){try{return!!t()}catch(t){return!0}},cn=!an(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),fn=tn.document,sn=on(fn)&&on(fn.createElement),ln=function(t){return sn?fn.createElement(t):{}},pn=!cn&&!an(function(){return 7!=Object.defineProperty(ln("div"),"a",{get:function(){return 7}}).a}),vn=function(t,e){if(!on(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!on(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!on(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!on(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},hn=Object.defineProperty,dn={f:cn?Object.defineProperty:function(t,e,n){if(un(t),e=vn(e,!0),un(n),pn)try{return hn(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},yn=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},gn=cn?function(t,e,n){return dn.f(t,e,yn(1,n))}:function(t,e,n){return t[e]=n,t},bn={}.hasOwnProperty,_n=function(t,e){return bn.call(t,e)},wn=function(t,e,n){var r,o,i,u=t&wn.F,a=t&wn.G,c=t&wn.S,f=t&wn.P,s=t&wn.B,l=t&wn.W,p=a?en:en[e]||(en[e]={}),v=p.prototype,h=a?tn:c?tn[e]:(tn[e]||{}).prototype;for(r in a&&(n=e),n)(o=!u&&h&&void 0!==h[r])&&_n(p,r)||(i=o?h[r]:n[r],p[r]=a&&"function"!=typeof h[r]?n[r]:s&&o?rn(i,tn):l&&h[r]==i?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):f&&"function"==typeof i?rn(Function.call,i):i,f&&((p.virtual||(p.virtual={}))[r]=i,t&wn.R&&v&&!v[r]&&gn(v,r,i)))};wn.F=1,wn.G=2,wn.S=4,wn.P=8,wn.B=16,wn.W=32,wn.U=64,wn.R=128;var mn,jn=wn,On=gn,Sn=Math.ceil,kn=Math.floor,Pn=function(t){return isNaN(t=+t)?0:(t>0?kn:Sn)(t)},En=Math.min,Tn=function(t){return t>0?En(Pn(t),9007199254740991):0},xn=Math.max,An=Math.min,Cn=b(function(t){var e=tn["__core-js_shared__"]||(tn["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:en.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Mn=0,Rn=Math.random(),Fn=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Mn+Rn).toString(36))},Dn=Cn("keys"),Ln=function(t){return Dn[t]||(Dn[t]=Fn(t))},Nn=(mn=!1,function(t,e,n){var r,o=Ze(t),i=Tn(o.length),u=function(t,e){return(t=Pn(t))<0?xn(t+e,0):An(t,e)}(n,i);if(mn&&e!=e){for(;i>u;)if((r=o[u++])!=r)return!0}else for(;i>u;u++)if((mn||u in o)&&o[u]===e)return mn||u||0;return!mn&&-1}),In=Ln("IE_PROTO"),zn=function(t,e){var n,r=Ze(t),o=0,i=[];for(n in r)n!=In&&_n(r,n)&&i.push(n);for(;e.length>o;)_n(r,n=e[o++])&&(~Nn(i,n)||i.push(n));return i},Wn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),qn=Object.keys||function(t){return zn(t,Wn)},Gn=cn?Object.defineProperties:function(t,e){un(t);for(var n,r=qn(e),o=r.length,i=0;o>i;)dn.f(t,n=r[i++],e[n]);return t},Un=tn.document,Bn=Un&&Un.documentElement,Hn=Ln("IE_PROTO"),Jn=function(){},Kn=function(){var t,e=ln("iframe"),n=Wn.length;for(e.style.display="none",Bn.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Kn=t.F;n--;)delete Kn.prototype[Wn[n]];return Kn()},Vn=Object.create||function(t,e){var n;return null!==t?(Jn.prototype=un(t),n=new Jn,Jn.prototype=null,n[Hn]=t):n=Kn(),void 0===e?n:Gn(n,e)},$n=b(function(t){var e=Cn("wks"),n=tn.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:Fn)("Symbol."+t))}).store=e}),Qn=dn.f,Yn=$n("toStringTag"),Xn=function(t,e,n){t&&!_n(t=n?t:t.prototype,Yn)&&Qn(t,Yn,{configurable:!0,value:e})},Zn={};gn(Zn,$n("iterator"),function(){return this});var tr=function(t,e,n){t.prototype=Vn(Zn,{next:yn(1,n)}),Xn(t,e+" Iterator")},er=function(t){return Object(Xe(t))},nr=Ln("IE_PROTO"),rr=Object.prototype,or=Object.getPrototypeOf||function(t){return t=er(t),_n(t,nr)?t[nr]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?rr:null},ir=$n("iterator"),ur=!([].keys&&"next"in[].keys()),ar=function(){return this},cr=function(t,e,n,r,o,i,u){tr(n,e,r);var a,c,f,s=function(t){if(!ur&&t in h)return h[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",p="values"==o,v=!1,h=t.prototype,d=h[ir]||h["@@iterator"]||o&&h[o],y=d||s(o),g=o?p?s("entries"):y:void 0,b="Array"==e&&h.entries||d;if(b&&(f=or(b.call(new t)))!==Object.prototype&&f.next&&Xn(f,l,!0),p&&d&&"values"!==d.name&&(v=!0,y=function(){return d.call(this)}),u&&(ur||v||!h[ir])&&gn(h,ir,y),Ve[e]=y,Ve[l]=ar,o)if(a={values:p?y:s("values"),keys:i?y:s("keys"),entries:g},u)for(c in a)c in h||On(h,c,a[c]);else jn(jn.P+jn.F*(ur||v),e,a);return a};cr(Array,"Array",function(t,e){this._t=Ze(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Ke(1)):Ke(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Ve.Arguments=Ve.Array;for(var fr=$n("toStringTag"),sr="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),lr=0;lr<sr.length;lr++){var pr=sr[lr],vr=tn[pr],hr=vr&&vr.prototype;hr&&!hr[fr]&&gn(hr,fr,pr),Ve[pr]=Ve.Array}var dr=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:gn(t,r,e[r]);return t},yr=b(function(t){var e=Fn("meta"),n=dn.f,r=0,o=Object.isExtensible||function(){return!0},i=!an(function(){return o(Object.preventExtensions({}))}),u=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},a=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!on(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!_n(t,e)){if(!o(t))return"F";if(!n)return"E";u(t)}return t[e].i},getWeak:function(t,n){if(!_n(t,e)){if(!o(t))return!0;if(!n)return!1;u(t)}return t[e].w},onFreeze:function(t){return i&&a.NEED&&o(t)&&!_n(t,e)&&u(t),t}}}),gr=(yr.KEY,yr.NEED,yr.fastKey,yr.getWeak,yr.onFreeze,function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}),br=function(t,e,n,r){try{return r?e(un(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&un(o.call(t)),e}},_r=$n("iterator"),wr=Array.prototype,mr=$n("toStringTag"),jr="Arguments"==Qe(function(){return arguments}()),Or=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),mr))?n:jr?Qe(e):"Object"==(r=Qe(e))&&"function"==typeof e.callee?"Arguments":r},Sr=$n("iterator"),kr=en.getIteratorMethod=function(t){if(null!=t)return t[Sr]||t["@@iterator"]||Ve[Or(t)]},Pr=b(function(t){var e={},n={},r=t.exports=function(t,r,o,i,u){var a,c,f,s,l,p=u?function(){return t}:kr(t),v=rn(o,i,r?2:1),h=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(void 0===(l=p)||Ve.Array!==l&&wr[_r]!==l){for(f=p.call(t);!(c=f.next()).done;)if((s=br(f,v,c.value,r))===e||s===n)return s}else for(a=Tn(t.length);a>h;h++)if((s=r?v(un(c=t[h])[0],c[1]):v(t[h]))===e||s===n)return s};r.BREAK=e,r.RETURN=n}),Er=Array.isArray||function(t){return"Array"==Qe(t)},Tr=$n("species"),xr=function(t,e){return new(function(t){var e;return Er(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Er(e.prototype)||(e=void 0),on(e)&&null===(e=e[Tr])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Ar=function(t,e){var n=1==t,r=2==t,o=3==t,i=4==t,u=6==t,a=5==t||u,c=e||xr;return function(e,f,s){for(var l,p,v=er(e),h=Ye(v),d=rn(f,s,3),y=Tn(h.length),g=0,b=n?c(e,y):r?c(e,0):void 0;y>g;g++)if((a||g in h)&&(p=d(l=h[g],g,v),t))if(n)b[g]=p;else if(p)switch(t){case 3:return!0;case 5:return l;case 6:return g;case 2:b.push(l)}else if(i)return!1;return u?-1:o||i?i:b}},Cr=function(t,e){if(!on(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t},Mr=yr.getWeak,Rr=Ar(5),Fr=Ar(6),Dr=0,Lr=function(t){return t._l||(t._l=new Nr)},Nr=function(){this.a=[]},Ir=function(t,e){return Rr(t.a,function(t){return t[0]===e})};Nr.prototype={get:function(t){var e=Ir(this,t);if(e)return e[1]},has:function(t){return!!Ir(this,t)},set:function(t,e){var n=Ir(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=Fr(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var zr={getConstructor:function(t,e,n,r){var o=t(function(t,i){gr(t,o,e,"_i"),t._t=e,t._i=Dr++,t._l=void 0,null!=i&&Pr(i,n,t[r],t)});return dr(o.prototype,{delete:function(t){if(!on(t))return!1;var n=Mr(t);return!0===n?Lr(Cr(this,e)).delete(t):n&&_n(n,this._i)&&delete n[this._i]},has:function(t){if(!on(t))return!1;var n=Mr(t);return!0===n?Lr(Cr(this,e)).has(t):n&&_n(n,this._i)}}),o},def:function(t,e,n){var r=Mr(un(e),!0);return!0===r?Lr(t).set(e,n):r[t._i]=n,t},ufstore:Lr},Wr=dn.f,qr=Ar(0),Gr=function(t,e,n,r,o,i){var u=tn[t],a=u,c=o?"set":"add",f=a&&a.prototype,s={};return cn&&"function"==typeof a&&(i||f.forEach&&!an(function(){(new a).entries().next()}))?(a=e(function(e,n){gr(e,a,t,"_c"),e._c=new u,null!=n&&Pr(n,o,e[c],e)}),qr("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in f&&(!i||"clear"!=t)&&gn(a.prototype,t,function(n,r){if(gr(this,a,t),!e&&i&&!on(n))return"get"==t&&void 0;var o=this._c[t](0===n?0:n,r);return e?this:o})}),i||Wr(a.prototype,"size",{get:function(){return this._c.size}})):(a=r.getConstructor(e,t,o,c),dr(a.prototype,n),yr.NEED=!0),Xn(a,t),s[t]=a,jn(jn.G+jn.W+jn.F,s),i||r.setStrong(a,t,o),a};Gr("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return zr.def(Cr(this,"WeakSet"),t,!0)}},zr,!1,!0);var Ur=function(t){jn(jn.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})};Ur("WeakSet");var Br=function(t){jn(jn.S,t,{from:function(t){var e,n,r,o,i=arguments[1];return nn(this),(e=void 0!==i)&&nn(i),null==t?new this:(n=[],e?(r=0,o=rn(i,arguments[2],2),Pr(t,!1,function(t){n.push(o(t,r++))})):Pr(t,!1,n.push,n),new this(n))}})};Br("WeakSet");var Hr=en.WeakSet,Jr={f:Object.getOwnPropertySymbols},Kr={f:{}.propertyIsEnumerable},Vr=Object.assign,$r=!Vr||an(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Vr({},t)[n]||Object.keys(Vr({},e)).join("")!=r})?function(t,e){for(var n=er(t),r=arguments.length,o=1,i=Jr.f,u=Kr.f;r>o;)for(var a,c=Ye(arguments[o++]),f=i?qn(c).concat(i(c)):qn(c),s=f.length,l=0;s>l;)a=f[l++],cn&&!u.call(c,a)||(n[a]=c[a]);return n}:Vr;b(function(t){var e,n=Ar(0),r=Cr,o=!tn.ActiveXObject&&"ActiveXObject"in tn,i=yr.getWeak,u=Object.isExtensible,a=zr.ufstore,c=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},f={get:function(t){if(on(t)){var e=i(t);return!0===e?a(Cr(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return zr.def(Cr(this,"WeakMap"),t,e)}},s=t.exports=Gr("WeakMap",c,f,zr,!0,!0);r&&o&&(e=zr.getConstructor(c,"WeakMap"),$r(e.prototype,f),yr.NEED=!0,n(["delete","has","get","set"],function(t){var n=s.prototype,r=n[t];On(n,t,function(n,o){if(on(n)&&!u(n)){this._f||(this._f=new e);var i=this._f[t](n,o);return"set"==t?this:i}return r.call(this,n,o)})}))});Ur("WeakMap"),Br("WeakMap");var Qr=en.WeakMap;jn(jn.S+jn.F*!cn,"Object",{defineProperty:dn.f});var Yr=en.Object,Xr=function(t,e,n){return Yr.defineProperty(t,e,n)};jn(jn.S+jn.F*!cn,"Object",{defineProperties:Gn});var Zr=en.Object,to=function(t,e){return Zr.defineProperties(t,e)},eo=Wn.concat("length","prototype"),no={f:Object.getOwnPropertyNames||function(t){return zn(t,eo)}},ro=tn.Reflect,oo=ro&&ro.ownKeys||function(t){var e=no.f(un(t)),n=Jr.f;return n?e.concat(n(t)):e},io=Object.getOwnPropertyDescriptor,uo={f:cn?io:function(t,e){if(t=Ze(t),e=vn(e,!0),pn)try{return io(t,e)}catch(t){}if(_n(t,e))return yn(!Kr.f.call(t,e),t[e])}},ao=function(t,e,n){e in t?dn.f(t,e,yn(0,n)):t[e]=n};jn(jn.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=Ze(t),o=uo.f,i=oo(r),u={},a=0;i.length>a;)void 0!==(n=o(r,e=i[a++]))&&ao(u,e,n);return u}});var co=en.Object.getOwnPropertyDescriptors,fo=function(t,e){var n=(en.Object||{})[t]||Object[t],r={};r[t]=e(n),jn(jn.S+jn.F*an(function(){n(1)}),"Object",r)},so=uo.f;fo("getOwnPropertyDescriptor",function(){return function(t,e){return so(Ze(t),e)}});var lo=en.Object,po=function(t,e){return lo.getOwnPropertyDescriptor(t,e)},vo={f:$n},ho=dn.f,yo=function(t){var e=en.Symbol||(en.Symbol={});"_"==t.charAt(0)||t in e||ho(e,t,{value:vo.f(t)})},go=no.f,bo={}.toString,_o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wo={f:function(t){return _o&&"[object Window]"==bo.call(t)?function(t){try{return go(t)}catch(t){return _o.slice()}}(t):go(Ze(t))}},mo=yr.KEY,jo=uo.f,Oo=dn.f,So=wo.f,ko=tn.Symbol,Po=tn.JSON,Eo=Po&&Po.stringify,To=$n("_hidden"),xo=$n("toPrimitive"),Ao={}.propertyIsEnumerable,Co=Cn("symbol-registry"),Mo=Cn("symbols"),Ro=Cn("op-symbols"),Fo=Object.prototype,Do="function"==typeof ko&&!!Jr.f,Lo=tn.QObject,No=!Lo||!Lo.prototype||!Lo.prototype.findChild,Io=cn&&an(function(){return 7!=Vn(Oo({},"a",{get:function(){return Oo(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=jo(Fo,e);r&&delete Fo[e],Oo(t,e,n),r&&t!==Fo&&Oo(Fo,e,r)}:Oo,zo=function(t){var e=Mo[t]=Vn(ko.prototype);return e._k=t,e},Wo=Do&&"symbol"==typeof ko.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof ko},qo=function(t,e,n){return t===Fo&&qo(Ro,e,n),un(t),e=vn(e,!0),un(n),_n(Mo,e)?(n.enumerable?(_n(t,To)&&t[To][e]&&(t[To][e]=!1),n=Vn(n,{enumerable:yn(0,!1)})):(_n(t,To)||Oo(t,To,yn(1,{})),t[To][e]=!0),Io(t,e,n)):Oo(t,e,n)},Go=function(t,e){un(t);for(var n,r=function(t){var e=qn(t),n=Jr.f;if(n)for(var r,o=n(t),i=Kr.f,u=0;o.length>u;)i.call(t,r=o[u++])&&e.push(r);return e}(e=Ze(e)),o=0,i=r.length;i>o;)qo(t,n=r[o++],e[n]);return t},Uo=function(t){var e=Ao.call(this,t=vn(t,!0));return!(this===Fo&&_n(Mo,t)&&!_n(Ro,t))&&(!(e||!_n(this,t)||!_n(Mo,t)||_n(this,To)&&this[To][t])||e)},Bo=function(t,e){if(t=Ze(t),e=vn(e,!0),t!==Fo||!_n(Mo,e)||_n(Ro,e)){var n=jo(t,e);return!n||!_n(Mo,e)||_n(t,To)&&t[To][e]||(n.enumerable=!0),n}},Ho=function(t){for(var e,n=So(Ze(t)),r=[],o=0;n.length>o;)_n(Mo,e=n[o++])||e==To||e==mo||r.push(e);return r},Jo=function(t){for(var e,n=t===Fo,r=So(n?Ro:Ze(t)),o=[],i=0;r.length>i;)!_n(Mo,e=r[i++])||n&&!_n(Fo,e)||o.push(Mo[e]);return o};Do||(On((ko=function(){if(this instanceof ko)throw TypeError("Symbol is not a constructor!");var t=Fn(arguments.length>0?arguments[0]:void 0),e=function(n){this===Fo&&e.call(Ro,n),_n(this,To)&&_n(this[To],t)&&(this[To][t]=!1),Io(this,t,yn(1,n))};return cn&&No&&Io(Fo,t,{configurable:!0,set:e}),zo(t)}).prototype,"toString",function(){return this._k}),uo.f=Bo,dn.f=qo,no.f=wo.f=Ho,Kr.f=Uo,Jr.f=Jo,vo.f=function(t){return zo($n(t))}),jn(jn.G+jn.W+jn.F*!Do,{Symbol:ko});for(var Ko="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Vo=0;Ko.length>Vo;)$n(Ko[Vo++]);for(var $o=qn($n.store),Qo=0;$o.length>Qo;)yo($o[Qo++]);jn(jn.S+jn.F*!Do,"Symbol",{for:function(t){return _n(Co,t+="")?Co[t]:Co[t]=ko(t)},keyFor:function(t){if(!Wo(t))throw TypeError(t+" is not a symbol!");for(var e in Co)if(Co[e]===t)return e},useSetter:function(){No=!0},useSimple:function(){No=!1}}),jn(jn.S+jn.F*!Do,"Object",{create:function(t,e){return void 0===e?Vn(t):Go(Vn(t),e)},defineProperty:qo,defineProperties:Go,getOwnPropertyDescriptor:Bo,getOwnPropertyNames:Ho,getOwnPropertySymbols:Jo});var Yo=an(function(){Jr.f(1)});jn(jn.S+jn.F*Yo,"Object",{getOwnPropertySymbols:function(t){return Jr.f(er(t))}}),Po&&jn(jn.S+jn.F*(!Do||an(function(){var t=ko();return"[null]"!=Eo([t])||"{}"!=Eo({a:t})||"{}"!=Eo(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(on(e)||void 0!==t)&&!Wo(t))return Er(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Wo(e))return e}),r[1]=e,Eo.apply(Po,r)}}),ko.prototype[xo]||gn(ko.prototype,xo,ko.prototype.valueOf),Xn(ko,"Symbol"),Xn(Math,"Math",!0),Xn(tn.JSON,"JSON",!0);var Xo=en.Object.getOwnPropertySymbols;fo("keys",function(){return function(t){return qn(er(t))}});var Zo,ti=en.Object.keys,ei=(Zo=!0,function(t,e){var n,r,o=String(Xe(t)),i=Pn(e),u=o.length;return i<0||i>=u?Zo?"":void 0:(n=o.charCodeAt(i))<55296||n>56319||i+1===u||(r=o.charCodeAt(i+1))<56320||r>57343?Zo?o.charAt(i):n:Zo?o.slice(i,i+2):r-56320+(n-55296<<10)+65536});cr(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=ei(e,n),this._i+=t.length,{value:t,done:!1})});var ni,ri,oi,ii=$n("species"),ui=function(t,e){var n,r=un(t).constructor;return void 0===r||null==(n=un(r)[ii])?e:nn(n)},ai=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},ci=tn.process,fi=tn.setImmediate,si=tn.clearImmediate,li=tn.MessageChannel,pi=tn.Dispatch,vi=0,hi={},di=function(){var t=+this;if(hi.hasOwnProperty(t)){var e=hi[t];delete hi[t],e()}},yi=function(t){di.call(t.data)};fi&&si||(fi=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return hi[++vi]=function(){ai("function"==typeof t?t:Function(t),e)},ni(vi),vi},si=function(t){delete hi[t]},"process"==Qe(ci)?ni=function(t){ci.nextTick(rn(di,t,1))}:pi&&pi.now?ni=function(t){pi.now(rn(di,t,1))}:li?(oi=(ri=new li).port2,ri.port1.onmessage=yi,ni=rn(oi.postMessage,oi,1)):tn.addEventListener&&"function"==typeof postMessage&&!tn.importScripts?(ni=function(t){tn.postMessage(t+"","*")},tn.addEventListener("message",yi,!1)):ni="onreadystatechange"in ln("script")?function(t){Bn.appendChild(ln("script")).onreadystatechange=function(){Bn.removeChild(this),di.call(t)}}:function(t){setTimeout(rn(di,t,1),0)});var gi={set:fi,clear:si},bi=gi.set,_i=tn.MutationObserver||tn.WebKitMutationObserver,wi=tn.process,mi=tn.Promise,ji="process"==Qe(wi);function Oi(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=nn(e),this.reject=nn(n)}var Si={f:function(t){return new Oi(t)}},ki=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Pi=tn.navigator,Ei=Pi&&Pi.userAgent||"",Ti=function(t,e){if(un(t),on(e)&&e.constructor===t)return e;var n=Si.f(t);return(0,n.resolve)(e),n.promise},xi=$n("species"),Ai=$n("iterator"),Ci=!1;try{var Mi=[7][Ai]();Mi.return=function(){Ci=!0},Array.from(Mi,function(){throw 2})}catch(t){}var Ri,Fi,Di,Li,Ni,Ii,zi=gi.set,Wi=function(){var t,e,n,r=function(){var r,o;for(ji&&(r=wi.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(ji)n=function(){wi.nextTick(r)};else if(!_i||tn.navigator&&tn.navigator.standalone)if(mi&&mi.resolve){var o=mi.resolve(void 0);n=function(){o.then(r)}}else n=function(){bi.call(tn,r)};else{var i=!0,u=document.createTextNode("");new _i(r).observe(u,{characterData:!0}),n=function(){u.data=i=!i}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}(),qi=tn.TypeError,Gi=tn.process,Ui=Gi&&Gi.versions,Bi=Ui&&Ui.v8||"",Hi=tn.Promise,Ji="process"==Or(Gi),Ki=function(){},Vi=Fi=Si.f,$i=!!function(){try{var t=Hi.resolve(1),e=(t.constructor={})[$n("species")]=function(t){t(Ki,Ki)};return(Ji||"function"==typeof PromiseRejectionEvent)&&t.then(Ki)instanceof e&&0!==Bi.indexOf("6.6")&&-1===Ei.indexOf("Chrome/66")}catch(t){}}(),Qi=function(t){var e;return!(!on(t)||"function"!=typeof(e=t.then))&&e},Yi=function(t,e){if(!t._n){t._n=!0;var n=t._c;Wi(function(){for(var r=t._v,o=1==t._s,i=0,u=function(e){var n,i,u,a=o?e.ok:e.fail,c=e.resolve,f=e.reject,s=e.domain;try{a?(o||(2==t._h&&tu(t),t._h=1),!0===a?n=r:(s&&s.enter(),n=a(r),s&&(s.exit(),u=!0)),n===e.promise?f(qi("Promise-chain cycle")):(i=Qi(n))?i.call(n,c,f):c(n)):f(r)}catch(t){s&&!u&&s.exit(),f(t)}};n.length>i;)u(n[i++]);t._c=[],t._n=!1,e&&!t._h&&Xi(t)})}},Xi=function(t){zi.call(tn,function(){var e,n,r,o=t._v,i=Zi(t);if(i&&(e=ki(function(){Ji?Gi.emit("unhandledRejection",o,t):(n=tn.onunhandledrejection)?n({promise:t,reason:o}):(r=tn.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=Ji||Zi(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},Zi=function(t){return 1!==t._h&&0===(t._a||t._c).length},tu=function(t){zi.call(tn,function(){var e;Ji?Gi.emit("rejectionHandled",t):(e=tn.onrejectionhandled)&&e({promise:t,reason:t._v})})},eu=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Yi(e,!0))},nu=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw qi("Promise can't be resolved itself");(e=Qi(t))?Wi(function(){var r={_w:n,_d:!1};try{e.call(t,rn(nu,r,1),rn(eu,r,1))}catch(t){eu.call(r,t)}}):(n._v=t,n._s=1,Yi(n,!1))}catch(t){eu.call({_w:n,_d:!1},t)}}};$i||(Hi=function(t){gr(this,Hi,"Promise","_h"),nn(t),Ri.call(this);try{t(rn(nu,this,1),rn(eu,this,1))}catch(t){eu.call(this,t)}},(Ri=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=dr(Hi.prototype,{then:function(t,e){var n=Vi(ui(this,Hi));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Ji?Gi.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Yi(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Di=function(){var t=new Ri;this.promise=t,this.resolve=rn(nu,t,1),this.reject=rn(eu,t,1)},Si.f=Vi=function(t){return t===Hi||t===Li?new Di(t):Fi(t)}),jn(jn.G+jn.W+jn.F*!$i,{Promise:Hi}),Xn(Hi,"Promise"),Ii="function"==typeof en[Ni="Promise"]?en[Ni]:tn[Ni],cn&&Ii&&!Ii[xi]&&dn.f(Ii,xi,{configurable:!0,get:function(){return this}}),Li=en.Promise,jn(jn.S+jn.F*!$i,"Promise",{reject:function(t){var e=Vi(this);return(0,e.reject)(t),e.promise}}),jn(jn.S+!0*jn.F,"Promise",{resolve:function(t){return Ti(this===Li?Hi:this,t)}}),jn(jn.S+jn.F*!($i&&function(t,e){if(!e&&!Ci)return!1;var n=!1;try{var r=[7],o=r[Ai]();o.next=function(){return{done:n=!0}},r[Ai]=function(){return o},t(r)}catch(t){}return n}(function(t){Hi.all(t).catch(Ki)})),"Promise",{all:function(t){var e=this,n=Vi(e),r=n.resolve,o=n.reject,i=ki(function(){var n=[],i=0,u=1;Pr(t,!1,function(t){var a=i++,c=!1;n.push(void 0),u++,e.resolve(t).then(function(t){c||(c=!0,n[a]=t,--u||r(n))},o)}),--u||r(n)});return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=Vi(e),r=n.reject,o=ki(function(){Pr(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}}),jn(jn.P+jn.R,"Promise",{finally:function(t){var e=ui(this,en.Promise||tn.Promise),n="function"==typeof t;return this.then(n?function(n){return Ti(e,t()).then(function(){return n})}:t,n?function(n){return Ti(e,t()).then(function(){throw n})}:t)}}),jn(jn.S,"Promise",{try:function(t){var e=Si.f(this),n=ki(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var ru=en.Promise;jn(jn.S,"Array",{isArray:Er});var ou=en.Array.isArray;jn(jn.S,"Date",{now:function(){return(new Date).getTime()}});var iu=en.Date.now;var uu=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function au(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Xr(t,r.key,r)}}var cu=function(t,e,n){return e&&au(t.prototype,e),n&&au(t,n),t},fu=vo.f("iterator");yo("asyncIterator"),yo("observable");var su=en.Symbol,lu=b(function(t){function e(t){return(e="function"==typeof su&&"symbol"==typeof fu?function(t){return typeof t}:function(t){return t&&"function"==typeof su&&t.constructor===su&&t!==su.prototype?"symbol":typeof t})(t)}function n(r){return"function"==typeof su&&"symbol"===e(fu)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof su&&t.constructor===su&&t!==su.prototype?"symbol":e(t)},n(r)}t.exports=n});var pu=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var vu=function(t,e){return!e||"object"!==lu(e)&&"function"!=typeof e?pu(t):e};fo("getPrototypeOf",function(){return function(t){return or(er(t))}});var hu=en.Object.getPrototypeOf,du=function(t,e){if(un(t),!on(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},yu={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=rn(Function.call,uo.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return du(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:du};jn(jn.S,"Object",{setPrototypeOf:yu.set});var gu=en.Object.setPrototypeOf,bu=b(function(t){function e(n){return t.exports=e=gu?hu:function(t){return t.__proto__||hu(t)},e(n)}t.exports=e});jn(jn.S,"Object",{create:Vn});var _u=en.Object,wu=function(t,e){return _u.create(t,e)},mu=b(function(t){function e(n,r){return t.exports=e=gu||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e});var ju=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=wu(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mu(t,e)};var Ou=function(t,e,n){return e in t?Xr(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};var Su=function(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value};var ku=function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n},Pu=function(t){function e(){var t;return uu(this,e),t=vu(this,bu(e).call(this)),Eu.set(pu(t),{writable:!0,value:{}}),Tu.set(pu(t),{writable:!0,value:[]}),xu.set(pu(t),{writable:!0,value:[]}),Au.set(pu(t),{writable:!0,value:[]}),t}return ju(e,n),cu(e,[{key:"config",value:function(){}},{key:"queue",value:function(){}},{key:"use",value:function(){}},{key:"getToken",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefresh:!1,withCredentials:!0};t.isRefresh,t.withCredentials}},{key:"getUserInfo",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.rawData,t.signature,t.encryptedData,t.iv}},{key:"addEventListener",value:function(){}}]),e}(),Eu=new Qr,Tu=new Qr,xu=new Qr,Au=new Qr,Cu="MINI_AUTH:token:",Mu="".concat(Cu,"beforeRefresh"),Ru="".concat(Cu,"afterRefresh"),Fu="".concat(Cu,"beforeCache"),Du="".concat(Cu,"afterCache"),Lu="".concat(Cu,"expired"),Nu="".concat(Cu,"beforeLogin"),Iu="".concat(Cu,"afterLogin"),zu="".concat(Cu,"beforeRequest"),Wu="".concat(Cu,"afterRequest"),qu=en.JSON||(en.JSON={stringify:JSON.stringify}),Gu=function(t){return qu.stringify.apply(qu,arguments)};jn(jn.S+jn.F,"Object",{assign:$r});var Uu=en.Object.assign;function Bu(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.errCode||0;return{errCode:t.errCode||0,errMsg:0===e?"":t.errMsg||Gu(t),status:t.statusCode||-1,headers:t.header||null,data:t.data||null}}var Hu=function(){function t(){uu(this,t),Ou(this,"context",{}),Ou(this,"middleware",[])}return cu(t,[{key:"createContext",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=wu(this.context);return Uu(e,t)}},{key:"dispatch",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,n=this.createContext(t),r=this.runMiddleware(e||this.middleware);return r(n)}},{key:"runMiddleware",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return function(e,n){var r=-1;return new ru(function(o,i){!function u(a,c){if(a<=r)return i(Bu({errCode:5004,errMsg:"next() called multiple times"}));if(c)return i(c);var f=t[r=a];if(r===t.length&&(f=n),!f)return o(e);try{return f(e,u.bind(null,r+1))}catch(t){return i(Bu({errCode:5005,errMsg:Gu(t)}))}}(0,null)})}}},{key:"use",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};if("function"!=typeof t)throw new Error("middle must be function!");this.middleware.push(t)}},{key:"useBatch",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];e.forEach(function(e){t.use(e)})}}]),t}();var Ju={timeout:2e4,scopes:"auth_base",force:!0};function Ku(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},n=t.timeout,r=t.env,o=t.scopes,i=t.force,u=null;switch(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.checkPropTypes({timeout:e.number,scopes:e.string,force:e.bool},t)}(Be(Ju,{timeout:n,scopes:o,force:i})),r){case"aliapp":case"swan":case"ttapp":case"weapp":default:u=function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{timeout:2e4}).timeout;return new ru(function(e,n){wx.login({timeout:t,success:function(t){e({errCode:0,errMsg:"",jsCode:t.code})},fail:function(t){n({errCode:5e3,errMsg:t.errMsg||Gu(t),jsCode:""})}})})}({timeout:n})}return u}var Vu={url:"",data:{},headers:{},timeout:3e4,method:"GET"};function $u(t,e){var n=ti(t);return Xo&&n.push.apply(n,Xo(t)),e&&(n=n.filter(function(e){return po(t,e).enumerable})),n}function Qu(t){for(var e,n=1;n<arguments.length;n++)e=null==arguments[n]?{}:arguments[n],n%2?$u(e,!0).forEach(function(n){Ou(t,n,e[n])}):co?to(t,co(e)):$u(e).forEach(function(n){Xr(t,n,po(e,n))});return t}function Yu(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},n=t.url,r=t.timeout,o=t.data,i=t.headers,u=t.method,a=t.env,c=null;switch(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.checkPropTypes({url:e.string,data:e.object,headers:e.object,timeout:e.number,method:e.string},t)}(Be(Vu,{url:n,timeout:r,data:o,headers:i,method:u})),a){case"aliapp":case"swan":case"ttapp":case"weapp":default:c=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{method:"GET",data:{}},e=t.url,n=t.data,r=t.headers,o=t.method;return new ru(function(t,i){wx.request({url:e,data:n,header:r,method:o,success:function(e){t(Bu(Qu({errCode:0},e)))},fail:function(t){var e=5003;e=t.errMsg?-1<t.errMsg.toLowerCase().indexOf("timeout")?5001:5002:5003,i(Bu(Qu({errCode:e},t)))}})})}({url:n,data:o,header:i,method:u})}return c}var Xu={setStorageSync:wx.setStorageSync.bind(wx),getStorageSync:wx.getStorageSync.bind(wx),removeStorageSync:wx.removeStorageSync.bind(wx)};function Zu(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"}).env;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";try{switch(t){case"aliapp":case"swan":case"ttapp":case"weapp":default:Xu.setStorageSync(e,n)}}catch(t){throw t}}}function ta(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"}).env;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=null;try{switch(t){case"aliapp":case"swan":case"ttapp":case"weapp":default:n=Xu.getStorageSync(e)}}catch(t){throw t}return n}}function ea(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"}).env;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{switch(t){case"aliapp":case"swan":case"ttapp":case"weapp":default:Xu.removeStorageSync(e)}}catch(t){throw t}}}function na(t,e){var n=ti(t);return Xo&&n.push.apply(n,Xo(t)),e&&(n=n.filter(function(e){return po(t,e).enumerable})),n}function ra(t){for(var e,n=1;n<arguments.length;n++)e=null==arguments[n]?{}:arguments[n],n%2?na(e,!0).forEach(function(n){Ou(t,n,e[n])}):co?to(t,co(e)):na(e).forEach(function(n){Xr(t,n,po(e,n))});return t}function oa(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var ia=function(t){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return uu(this,e),t=vu(this,bu(e).call(this)),ha.add(pu(t)),va.add(pu(t)),ua.set(pu(t),{writable:!0,value:{}}),aa.set(pu(t),{writable:!0,value:[]}),ca.set(pu(t),{writable:!0,value:[]}),fa.set(pu(t),{writable:!0,value:[]}),sa.set(pu(t),{writable:!0,value:[]}),la.set(pu(t),{writable:!0,value:68e5}),pa.set(pu(t),{writable:!0,value:!1}),Ou(pu(t),"tokenReqData",{}),Ou(pu(t),"tokenResData",{}),t.middleware=new Hu,ku(pu(t),ua,n),t}return ju(e,Pu),cu(e,[{key:"use",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};if("function"==typeof e)switch(t){case"afterToken":Su(this,fa).push(e);break;case"user":Su(this,sa).push(e);break;case"token":default:Su(this,ca).push(e)}}},{key:"set2Storage",value:function(){function t(e){try{Zu(Su(this,ua).env)(r.key,r.data)}catch(n){console.error(n),0<e&&t.call(this,e-1)}return r.data}var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=oa(this,ha,ya).call(this,e,n);return t.call(this,3)}},{key:"getDataFromStorage",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token",e=null;try{e=ta(Su(this,ua).env)(oa(this,va,da).call(this,t))}catch(t){console.error(t)}return e}},{key:"clearStorage",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token";try{ea(Su(this,ua).env)(oa(this,va,da).call(this,t))}catch(t){console.error(t)}}},{key:"isExpired",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(t){var e=t.expirationTime;return!(e&&e>iu())}return!0}},{key:"runQueues",value:function(t,e){if(Su(this,aa)&&ou(Su(this,aa))){var n=Su(this,aa).length;Su(this,aa).splice(0,n).forEach(function(n){var r=n.resolve,o=n.reject;return t?o(t):r(e)})}}},{key:"getToken",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefresh:!1},n=e.isRefresh;return new ru(function(e,r){if(Su(t,pa))return Su(t,aa).push({resolve:e,reject:r});var o=Su(t,ua).env,i=Su(t,ua).tokenReqConfig,u=i.url,a=i.method,c=null;if(n)t.emit(Mu),t.clearStorage("token"),t.emit(Ru);else{if((c=t.getDataFromStorage("token"))&&!t.isExpired(c))return t.emit(Fu,c),setTimeout(function(){e(c),t.emit(Du,c)});t.emit(Lu),t.clearStorage("token")}t.emit(Nu),ku(t,pa,!0),Ku({env:o}).then(function(e){return t.tokenReqData.jsCode=e.jsCode,t.emit(Iu,e),t.middleware.dispatch(t,Su(t,ca))}).then(function(e){return t.emit(zu),Yu({env:o,url:u,method:a,data:ra({},e.tokenReqData)})}).then(function(e){return t.tokenResData=e,t.middleware.dispatch(t,Su(t,fa))}).then(function(e){return t.emit(Wu,e.tokenResData),t.set2Storage("token",e.tokenResData)}).then(function(n){e(n),t.runQueues(null,n)}).catch(function(e){r(e),t.runQueues(e)}).finally(function(){ku(t,pa,!1),ku(t,aa,[])})})}},{key:"config",get:function(){return Su(this,ua)}},{key:"queue",get:function(){return this.waitQueues}}]),e}(),ua=new Qr,aa=new Qr,ca=new Qr,fa=new Qr,sa=new Qr,la=new Qr,pa=new Qr,va=new Hr,ha=new Hr,da=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token";return"MINI_AUTH:".concat(t,":").concat(Su(this,ua).appid)},ya=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return{key:oa(this,va,da).call(this,t),data:{data:e,expires:Su(this,la),expirationTime:iu()+Su(this,la)}}},ga={withCredentials:!1,env:"weapp",appid:"mockAppid",tokenReqConfig:{url:"",method:"GET",headers:{"content-type":"application/json"},timeout:1e4},userInfoReqConfig:{url:"",method:"GET",headers:{"content-type":"application/json"},timeout:1e4}};function ba(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=Be(ga,t);return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.checkPropTypes({withCredentials:e.bool.isRequired,env:e.oneOf(He),appid:e.string,tokenReqConfig:e.shape({url:e.string,method:e.oneOf(Je).isRequired,headers:e.object,timeout:e.number}),userInfoReqConfig:e.shape({url:e.string,method:e.oneOf(Je).isRequired,headers:e.object,timeout:e.number})},t)}(n),new ia(n)}var _a=ba(ga);_a.create=ba,t.default=ia,t.miniAuth=_a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mini-auth.common.js.map
