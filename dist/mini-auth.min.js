!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,function(){var n=e["mini-auth"],r=e["mini-auth"]={};t(r),r.noConflict=function(){return e["mini-auth"]=n,r}}())}(this,function(e){"use strict";var t=function(){this.__data__=[],this.size=0};var n=function(e,t){return e===t||e!=e&&t!=t};var r=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1},o=Array.prototype.splice;var i=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))};var a=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]};var u=function(e){return r(this.__data__,e)>-1};var c=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=t,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=u,s.prototype.set=c;var f=s;var l=function(){this.__data__=new f,this.size=0};var p=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var v=function(e){return this.__data__.get(e)};var y=function(e){return this.__data__.has(e)},h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function m(e,t){return e(t={exports:{}},t.exports),t.exports}var g="object"==typeof h&&h&&h.Object===Object&&h,b="object"==typeof self&&self&&self.Object===Object&&self,w=g||b||Function("return this")(),_=w.Symbol,j=Object.prototype,O=j.hasOwnProperty,S=j.toString,k=_?_.toStringTag:void 0;var E=function(e){var t=O.call(e,k),n=e[k];try{e[k]=void 0;var r=!0}catch(e){}var o=S.call(e);return r&&(t?e[k]=n:delete e[k]),o},x=Object.prototype.toString;var P=function(e){return x.call(e)},C="[object Null]",T="[object Undefined]",M=_?_.toStringTag:void 0;var A=function(e){return null==e?void 0===e?T:C:M&&M in Object(e)?E(e):P(e)};var R=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},L="[object AsyncFunction]",D="[object Function]",N="[object GeneratorFunction]",I="[object Proxy]";var F,$=function(e){if(!R(e))return!1;var t=A(e);return t==D||t==N||t==L||t==I},q=w["__core-js_shared__"],z=(F=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"";var W=function(e){return!!z&&z in e},V=Function.prototype.toString;var U=function(e){if(null!=e){try{return V.call(e)}catch(e){}try{return e+""}catch(e){}}return""},B=/^\[object .+?Constructor\]$/,G=Function.prototype,J=Object.prototype,H=G.toString,Q=J.hasOwnProperty,Y=RegExp("^"+H.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var K=function(e){return!(!R(e)||W(e))&&($(e)?Y:B).test(U(e))};var X=function(e,t){return null==e?void 0:e[t]};var Z=function(e,t){var n=X(e,t);return K(n)?n:void 0},ee=Z(w,"Map"),te=Z(Object,"create");var ne=function(){this.__data__=te?te(null):{},this.size=0};var re=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},oe="__lodash_hash_undefined__",ie=Object.prototype.hasOwnProperty;var ae=function(e){var t=this.__data__;if(te){var n=t[e];return n===oe?void 0:n}return ie.call(t,e)?t[e]:void 0},ue=Object.prototype.hasOwnProperty;var ce=function(e){var t=this.__data__;return te?void 0!==t[e]:ue.call(t,e)},se="__lodash_hash_undefined__";var fe=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=te&&void 0===t?se:t,this};function le(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}le.prototype.clear=ne,le.prototype.delete=re,le.prototype.get=ae,le.prototype.has=ce,le.prototype.set=fe;var pe=le;var ve=function(){this.size=0,this.__data__={hash:new pe,map:new(ee||f),string:new pe}};var ye=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var he=function(e,t){var n=e.__data__;return ye(t)?n["string"==typeof t?"string":"hash"]:n.map};var de=function(e){var t=he(this,e).delete(e);return this.size-=t?1:0,t};var me=function(e){return he(this,e).get(e)};var ge=function(e){return he(this,e).has(e)};var be=function(e,t){var n=he(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function we(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}we.prototype.clear=ve,we.prototype.delete=de,we.prototype.get=me,we.prototype.has=ge,we.prototype.set=be;var _e=we,je=200;var Oe=function(e,t){var n=this.__data__;if(n instanceof f){var r=n.__data__;if(!ee||r.length<je-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new _e(r)}return n.set(e,t),this.size=n.size,this};function Se(e){var t=this.__data__=new f(e);this.size=t.size}Se.prototype.clear=l,Se.prototype.delete=p,Se.prototype.get=v,Se.prototype.has=y,Se.prototype.set=Oe;var ke=Se,Ee=function(){try{var e=Z(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var xe=function(e,t,n){"__proto__"==t&&Ee?Ee(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var Pe=function(e,t,r){(void 0===r||n(e[t],r))&&(void 0!==r||t in e)||xe(e,t,r)};var Ce=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),u=a.length;u--;){var c=a[e?u:++o];if(!1===n(i[c],c,i))break}return t}}(),Te=m(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?w.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}}),Me=w.Uint8Array;var Ae=function(e){var t=new e.constructor(e.byteLength);return new Me(t).set(new Me(e)),t};var Re=function(e,t){var n=t?Ae(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var Le=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},De=Object.create,Ne=function(){function e(){}return function(t){if(!R(t))return{};if(De)return De(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var Ie=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),Fe=Object.prototype;var $e=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Fe)};var qe=function(e){return"function"!=typeof e.constructor||$e(e)?{}:Ne(Ie(e))};var ze=function(e){return null!=e&&"object"==typeof e},We="[object Arguments]";var Ve=function(e){return ze(e)&&A(e)==We},Ue=Object.prototype,Be=Ue.hasOwnProperty,Ge=Ue.propertyIsEnumerable,Je=Ve(function(){return arguments}())?Ve:function(e){return ze(e)&&Be.call(e,"callee")&&!Ge.call(e,"callee")},He=Array.isArray,Qe=9007199254740991;var Ye=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Qe};var Ke=function(e){return null!=e&&Ye(e.length)&&!$(e)};var Xe=function(e){return ze(e)&&Ke(e)};var Ze=function(){return!1},et=m(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?w.Buffer:void 0,i=(o?o.isBuffer:void 0)||Ze;e.exports=i}),nt="[object Object]",rt=Function.prototype,ot=Object.prototype,it=rt.toString,at=ot.hasOwnProperty,ut=it.call(Object);var ct=function(e){if(!ze(e)||A(e)!=nt)return!1;var t=Ie(e);if(null===t)return!0;var n=at.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&it.call(n)==ut},st={};st["[object Float32Array]"]=st["[object Float64Array]"]=st["[object Int8Array]"]=st["[object Int16Array]"]=st["[object Int32Array]"]=st["[object Uint8Array]"]=st["[object Uint8ClampedArray]"]=st["[object Uint16Array]"]=st["[object Uint32Array]"]=!0,st["[object Arguments]"]=st["[object Array]"]=st["[object ArrayBuffer]"]=st["[object Boolean]"]=st["[object DataView]"]=st["[object Date]"]=st["[object Error]"]=st["[object Function]"]=st["[object Map]"]=st["[object Number]"]=st["[object Object]"]=st["[object RegExp]"]=st["[object Set]"]=st["[object String]"]=st["[object WeakMap]"]=!1;var ft=function(e){return ze(e)&&Ye(e.length)&&!!st[A(e)]};var lt=function(e){return function(t){return e(t)}},pt=m(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&g.process,i=function(){try{var e=r&&r.require&&r.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),vt=pt&&pt.isTypedArray,yt=vt?lt(vt):ft;var ht=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},dt=Object.prototype.hasOwnProperty;var mt=function(e,t,r){var o=e[t];dt.call(e,t)&&n(o,r)&&(void 0!==r||t in e)||xe(e,t,r)};var gt=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var u=t[i],c=r?r(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),o?xe(n,u,c):mt(n,u,c)}return n};var bt=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},wt=9007199254740991,_t=/^(?:0|[1-9]\d*)$/;var jt=function(e,t){var n=typeof e;return!!(t=null==t?wt:t)&&("number"==n||"symbol"!=n&&_t.test(e))&&e>-1&&e%1==0&&e<t},Ot=Object.prototype.hasOwnProperty;var St=function(e,t){var n=He(e),r=!n&&Je(e),o=!n&&!r&&et(e),i=!n&&!r&&!o&&yt(e),a=n||r||o||i,u=a?bt(e.length,String):[],c=u.length;for(var s in e)!t&&!Ot.call(e,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||jt(s,c))||u.push(s);return u};var kt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},Et=Object.prototype.hasOwnProperty;var xt=function(e){if(!R(e))return kt(e);var t=$e(e),n=[];for(var r in e)("constructor"!=r||!t&&Et.call(e,r))&&n.push(r);return n};var Pt=function(e){return Ke(e)?St(e,!0):xt(e)};var Ct=function(e){return gt(e,Pt(e))};var Tt=function(e,t,n,r,o,i,a){var u=ht(e,n),c=ht(t,n),s=a.get(c);if(s)Pe(e,n,s);else{var f=i?i(u,c,n+"",e,t,a):void 0,l=void 0===f;if(l){var p=He(c),v=!p&&et(c),y=!p&&!v&&yt(c);f=c,p||v||y?He(u)?f=u:Xe(u)?f=Le(u):v?(l=!1,f=Te(c,!0)):y?(l=!1,f=Re(c,!0)):f=[]:ct(c)||Je(c)?(f=u,Je(u)?f=Ct(u):R(u)&&!$(u)||(f=qe(c))):l=!1}l&&(a.set(c,f),o(f,c,r,i,a),a.delete(c)),Pe(e,n,f)}};var Mt=function e(t,n,r,o,i){t!==n&&Ce(n,function(a,u){if(i||(i=new ke),R(a))Tt(t,n,u,r,e,o,i);else{var c=o?o(ht(t,u),a,u+"",t,n,i):void 0;void 0===c&&(c=a),Pe(t,u,c)}},Pt)};var At=function(e){return e};var Rt=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Lt=Math.max;var Dt=function(e,t,n){return t=Lt(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Lt(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=r[o];return u[t]=n(a),Rt(e,this,u)}};var Nt=function(e){return function(){return e}},It=Ee?function(e,t){return Ee(e,"toString",{configurable:!0,enumerable:!1,value:Nt(t),writable:!0})}:At,Ft=800,$t=16,qt=Date.now;var zt=function(e){var t=0,n=0;return function(){var r=qt(),o=$t-(r-n);if(n=r,o>0){if(++t>=Ft)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(It);var Wt=function(e,t){return zt(Dt(e,t,At),e+"")};var Vt=function(e,t,r){if(!R(r))return!1;var o=typeof t;return!!("number"==o?Ke(r)&&jt(t,r.length):"string"==o&&t in r)&&n(r[t],e)};var Ut=function(e){return Wt(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&Vt(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,i)}return t})}(function(e,t,n){Mt(e,t,n)}),Bt=m(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,l=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,v=n?Symbol.for("react.suspense"):60113,y=n?Symbol.for("react.memo"):60115,h=n?Symbol.for("react.lazy"):60116;function d(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case f:case l:case i:case u:case a:case v:return e;default:switch(e=e&&e.$$typeof){case s:case p:case c:return e;default:return t}}case h:case y:case o:return t}}}function m(e){return d(e)===l}t.typeOf=d,t.AsyncMode=f,t.ConcurrentMode=l,t.ContextConsumer=s,t.ContextProvider=c,t.Element=r,t.ForwardRef=p,t.Fragment=i,t.Lazy=h,t.Memo=y,t.Portal=o,t.Profiler=u,t.StrictMode=a,t.Suspense=v,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===l||e===u||e===a||e===v||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===y||e.$$typeof===c||e.$$typeof===s||e.$$typeof===p)},t.isAsyncMode=function(e){return m(e)||d(e)===f},t.isConcurrentMode=m,t.isContextConsumer=function(e){return d(e)===s},t.isContextProvider=function(e){return d(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return d(e)===p},t.isFragment=function(e){return d(e)===i},t.isLazy=function(e){return d(e)===h},t.isMemo=function(e){return d(e)===y},t.isPortal=function(e){return d(e)===o},t.isProfiler=function(e){return d(e)===u},t.isStrictMode=function(e){return d(e)===a},t.isSuspense=function(e){return d(e)===v}});d(Bt);Bt.typeOf,Bt.AsyncMode,Bt.ConcurrentMode,Bt.ContextConsumer,Bt.ContextProvider,Bt.Element,Bt.ForwardRef,Bt.Fragment,Bt.Lazy,Bt.Memo,Bt.Portal,Bt.Profiler,Bt.StrictMode,Bt.Suspense,Bt.isValidElementType,Bt.isAsyncMode,Bt.isConcurrentMode,Bt.isContextConsumer,Bt.isContextProvider,Bt.isElement,Bt.isForwardRef,Bt.isFragment,Bt.isLazy,Bt.isMemo,Bt.isPortal,Bt.isProfiler,Bt.isStrictMode,Bt.isSuspense;var Gt=m(function(e,t){"production"!==process.env.NODE_ENV&&function(){Object.defineProperty(t,"__esModule",{value:!0});var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,s=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,v=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116;var h=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.warn(i);try{throw new Error(i)}catch(e){}},d=function(e,t){if(void 0===t)throw new Error("`lowPriorityWarning(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];h.apply(void 0,[t].concat(r))}};function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var h=e.type;switch(h){case s:case f:case o:case a:case i:case p:return h;default:var d=h&&h.$$typeof;switch(d){case c:case l:case u:return d;default:return t}}case y:case v:case r:return t}}}var g=s,b=f,w=c,_=u,j=n,O=l,S=o,k=y,E=v,x=r,P=a,C=i,T=p,M=!1;function A(e){return m(e)===f}t.typeOf=m,t.AsyncMode=g,t.ConcurrentMode=b,t.ContextConsumer=w,t.ContextProvider=_,t.Element=j,t.ForwardRef=O,t.Fragment=S,t.Lazy=k,t.Memo=E,t.Portal=x,t.Profiler=P,t.StrictMode=C,t.Suspense=T,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===f||e===a||e===i||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===l)},t.isAsyncMode=function(e){return M||(M=!0,d(!1,"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),A(e)||m(e)===s},t.isConcurrentMode=A,t.isContextConsumer=function(e){return m(e)===c},t.isContextProvider=function(e){return m(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return m(e)===l},t.isFragment=function(e){return m(e)===o},t.isLazy=function(e){return m(e)===y},t.isMemo=function(e){return m(e)===v},t.isPortal=function(e){return m(e)===r},t.isProfiler=function(e){return m(e)===a},t.isStrictMode=function(e){return m(e)===i},t.isSuspense=function(e){return m(e)===p}}()});d(Gt);Gt.typeOf,Gt.AsyncMode,Gt.ConcurrentMode,Gt.ContextConsumer,Gt.ContextProvider,Gt.Element,Gt.ForwardRef,Gt.Fragment,Gt.Lazy,Gt.Memo,Gt.Portal,Gt.Profiler,Gt.StrictMode,Gt.Suspense,Gt.isValidElementType,Gt.isAsyncMode,Gt.isConcurrentMode,Gt.isContextConsumer,Gt.isContextProvider,Gt.isElement,Gt.isForwardRef,Gt.isFragment,Gt.isLazy,Gt.isMemo,Gt.isPortal,Gt.isProfiler,Gt.isStrictMode,Gt.isSuspense;var Jt=m(function(e){"production"===process.env.NODE_ENV?e.exports=Bt:e.exports=Gt}),Ht=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable;function Kt(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var Xt=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=Kt(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))Qt.call(n,a)&&(o[a]=n[a]);if(Ht){r=Ht(n);for(var u=0;u<r.length;u++)Yt.call(n,r[u])&&(o[r[u]]=n[r[u]])}}return o},Zt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",en=function(){};if("production"!==process.env.NODE_ENV){var tn=Zt,nn={},rn=Function.call.bind(Object.prototype.hasOwnProperty);en=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function on(e,t,n,r,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(rn(e,i)){var a;try{if("function"!=typeof e[i]){var u=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.");throw u.name="Invariant Violation",u}a=e[i](t,i,r,n,null,tn)}catch(e){a=e}if(!a||a instanceof Error||en((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in nn)){nn[a.message]=!0;var c=o?o():"";en("Failed "+n+" type: "+a.message+(null!=c?c:""))}}}on.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(nn={})};var an=on,un=Function.call.bind(Object.prototype.hasOwnProperty),cn=function(){};function sn(){return null}"production"!==process.env.NODE_ENV&&(cn=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});var fn=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";var o="<<anonymous>>",i={array:s("array"),bool:s("boolean"),func:s("function"),number:s("number"),object:s("object"),string:s("string"),symbol:s("symbol"),any:c(sn),arrayOf:function(e){return c(function(t,n,r,o,i){if("function"!=typeof e)return new u("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a)){var c=l(a);return new u("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected an array.")}for(var s=0;s<a.length;s++){var f=e(a,s,r,o,i+"["+s+"]",Zt);if(f instanceof Error)return f}return null})},element:c(function(t,n,r,o,i){var a=t[n];if(!e(a)){var c=l(a);return new u("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}),elementType:c(function(e,t,n,r,o){var i=e[t];if(!Jt.isValidElementType(i)){var a=l(i);return new u("Invalid "+r+" `"+o+"` of type `"+a+"` supplied to `"+n+"`, expected a single ReactElement type.")}return null}),instanceOf:function(e){return c(function(t,n,r,i,a){if(!(t[n]instanceof e)){var c=e.name||o,s=function(e){if(!e.constructor||!e.constructor.name)return o;return e.constructor.name}(t[n]);return new u("Invalid "+i+" `"+a+"` of type `"+s+"` supplied to `"+r+"`, expected instance of `"+c+"`.")}return null})},node:c(function(e,t,n,r,o){return f(e[t])?null:new u("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(e){return c(function(t,n,r,o,i){if("function"!=typeof e)return new u("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var a=t[n],c=l(a);if("object"!==c)return new u("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var s in a)if(un(a,s)){var f=e(a,s,r,o,i+"."+s,Zt);if(f instanceof Error)return f}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&(arguments.length>1?cn("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):cn("Invalid argument supplied to oneOf, expected an array.")),sn;return c(function(t,n,r,o,i){for(var c=t[n],s=0;s<e.length;s++)if(a(c,e[s]))return null;var f=JSON.stringify(e,function(e,t){var n=p(t);return"symbol"===n?String(t):t});return new u("Invalid "+o+" `"+i+"` of value `"+String(c)+"` supplied to `"+r+"`, expected one of "+f+".")})},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&cn("Invalid argument supplied to oneOfType, expected an instance of array."),sn;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return cn("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+v(n)+" at index "+t+"."),sn}return c(function(t,n,r,o,i){for(var a=0;a<e.length;a++){var c=e[a];if(null==c(t,n,r,o,i,Zt))return null}return new u("Invalid "+o+" `"+i+"` supplied to `"+r+"`.")})},shape:function(e){return c(function(t,n,r,o,i){var a=t[n],c=l(a);if("object"!==c)return new u("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var s in e){var f=e[s];if(f){var p=f(a,s,r,o,i+"."+s,Zt);if(p)return p}}return null})},exact:function(e){return c(function(t,n,r,o,i){var a=t[n],c=l(a);if("object"!==c)return new u("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var s=Xt({},t[n],e);for(var f in s){var p=e[f];if(!p)return new u("Invalid "+o+" `"+i+"` key `"+f+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var v=p(a,f,r,o,i+"."+f,Zt);if(v)return v}return null})}};function a(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function u(e){this.message=e,this.stack=""}function c(e){if("production"!==process.env.NODE_ENV)var n={},r=0;function i(i,a,c,s,f,l,p){if(s=s||o,l=l||c,p!==Zt){if(t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var y=s+":"+c;!n[y]&&r<3&&(cn("You are manually calling a React.PropTypes validation function for the `"+l+"` prop on `"+s+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[y]=!0,r++)}}return null==a[c]?i?null===a[c]?new u("The "+f+" `"+l+"` is marked as required in `"+s+"`, but its value is `null`."):new u("The "+f+" `"+l+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(a,c,s,f,l)}var a=i.bind(null,!1);return a.isRequired=i.bind(null,!0),a}function s(e){return c(function(t,n,r,o,i,a){var c=t[n];return l(c)!==e?new u("Invalid "+o+" `"+i+"` of type `"+p(c)+"` supplied to `"+r+"`, expected `"+e+"`."):null})}function f(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(f);if(null===t||e(t))return!0;var o=function(e){var t=e&&(n&&e[n]||e[r]);if("function"==typeof t)return t}(t);if(!o)return!1;var i,a=o.call(t);if(o!==t.entries){for(;!(i=a.next()).done;)if(!f(i.value))return!1}else for(;!(i=a.next()).done;){var u=i.value;if(u&&!f(u[1]))return!1}return!0;default:return!1}}function l(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function p(e){if(null==e)return""+e;var t=l(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function v(e){var t=p(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return u.prototype=Error.prototype,i.checkPropTypes=an,i.resetWarningCache=an.resetWarningCache,i.PropTypes=i,i};function ln(){}function pn(){}pn.resetWarningCache=ln;var vn=m(function(e){if("production"!==process.env.NODE_ENV){var t=Jt;e.exports=fn(t.isElement,!0)}else e.exports=function(){function e(e,t,n,r,o,i){if(i!==Zt){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pn,resetWarningCache:ln};return n.PropTypes=n,n}()}),yn=["weapp","aliapp","swan","ttapp"],hn=["OPTIONS","options","GET","get","HEAD","head","POST","post","PUT","put","DELETE","delete","TRACE","trace","CONNECT","connect"];var dn=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var gn=function(e,t,n){return t&&mn(e.prototype,t),n&&mn(e,n),e},bn=m(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n});var wn=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var _n=function(e,t){return!t||"object"!==bn(t)&&"function"!=typeof t?wn(e):t},jn=m(function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t}),On=m(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t});var Sn=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)};var kn=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};var En=function(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value};var xn=function(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n};function Pn(){}function Cn(){Cn.init.call(this)}function Tn(e){return void 0===e._maxListeners?Cn.defaultMaxListeners:e._maxListeners}function Mn(e,t,n){if(t)e.call(n);else for(var r=e.length,o=$n(e,r),i=0;i<r;++i)o[i].call(n)}function An(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=$n(e,o),a=0;a<o;++a)i[a].call(n,r)}function Rn(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,a=$n(e,i),u=0;u<i;++u)a[u].call(n,r,o)}function Ln(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var a=e.length,u=$n(e,a),c=0;c<a;++c)u[c].call(n,r,o,i)}function Dn(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=$n(e,o),a=0;a<o;++a)i[a].apply(n,r)}function Nn(e,t,n,r){var o,i,a,u;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=new Pn,e._eventsCount=0),a){if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=Tn(e))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,u=c,"function"==typeof console.warn?console.warn(u):console.log(u)}}else a=i[t]=n,++e._eventsCount;return e}function In(e,t,n){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,n.apply(e,arguments))}return o.listener=n,o}function Fn(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function $n(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function qn(){var e;Cn.call(this),this.__emitError=(e=this,function(t){e.emit("error",t)})}function zn(){return new qn}Pn.prototype=Object.create(null),Cn.EventEmitter=Cn,Cn.usingDomains=!1,Cn.prototype.domain=void 0,Cn.prototype._events=void 0,Cn.prototype._maxListeners=void 0,Cn.defaultMaxListeners=10,Cn.init=function(){this.domain=null,Cn.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Pn,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Cn.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Cn.prototype.getMaxListeners=function(){return Tn(this)},Cn.prototype.emit=function(e){var t,n,r,o,i,a,u,c="error"===e;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(u=this.domain,c){if(t=arguments[1],!u){if(t instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=u,t.domainThrown=!1,u.emit("error",t),!1}if(!(n=a[e]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:Mn(n,f,this);break;case 2:An(n,f,this,arguments[1]);break;case 3:Rn(n,f,this,arguments[1],arguments[2]);break;case 4:Ln(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];Dn(n,f,this,o)}return!0},Cn.prototype.addListener=function(e,t){return Nn(this,e,t,!1)},Cn.prototype.on=Cn.prototype.addListener,Cn.prototype.prependListener=function(e,t){return Nn(this,e,t,!0)},Cn.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,In(this,e,t)),this},Cn.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,In(this,e,t)),this},Cn.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new Pn:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Pn,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o);r.removeListener&&this.emit("removeListener",e,a||t)}return this},Cn.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Pn,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new Pn:delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Pn,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},Cn.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},Cn.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Fn.call(e,t)},Cn.prototype.listenerCount=Fn,Cn.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},("function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e})(qn,Cn),qn.prototype.add=function(e){e.on("error",this.__emitError)},qn.prototype.remove=function(e){e.removeListener("error",this.__emitError)},qn.prototype.bind=function(e){var t=this.__emitError;return function(){var n=Array.prototype.slice.call(arguments);try{e.apply(null,n)}catch(e){t(e)}}},qn.prototype.intercept=function(e){var t=this.__emitError;return function(n){if(n)t(n);else{var r=Array.prototype.slice.call(arguments,1);try{e.apply(null,r)}catch(n){t(n)}}}},qn.prototype.run=function(e){var t=this.__emitError;try{e()}catch(e){t(e)}return this},qn.prototype.dispose=function(){return this.removeAllListeners(),this},qn.prototype.enter=qn.prototype.exit=function(){return this};var Wn,Vn={Domain:qn,createDomain:zn,create:zn},Un="function"==typeof setImmediate,Bn=Gn;function Gn(e){Jn.length||(Xn(),Hn=!0),Jn[Jn.length]=e}var Jn=[],Hn=!1,Qn=0,Yn=1024;function Kn(){for(;Qn<Jn.length;){var e=Qn;if(Qn+=1,Jn[e].call(),Qn>Yn){for(var t=0,n=Jn.length-Qn;t<n;t++)Jn[t]=Jn[t+Qn];Jn.length-=Qn,Qn=0}}Jn.length=0,Qn=0,Hn=!1}function Xn(){var e=process.domain;e&&(Wn||(Wn=Vn),Wn.active=process.domain=null),Hn&&Un?setImmediate(Kn):process.nextTick(Kn),e&&(Wn.active=process.domain=e)}function Zn(){}Gn.requestFlush=Xn;var er=null,tr={};var nr=rr;function rr(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,e!==Zn&&sr(e,this)}function or(e,t){for(;3===e._i;)e=e._j;if(rr._l&&rr._l(e),0===e._i)return 0===e._h?(e._h=1,void(e._k=t)):1===e._h?(e._h=2,void(e._k=[e._k,t])):void e._k.push(t);!function(e,t){Bn(function(){var n=1===e._i?t.onFulfilled:t.onRejected;if(null!==n){var r=function(e,t){try{return e(t)}catch(e){return er=e,tr}}(n,e._j);r===tr?ar(t.promise,er):ir(t.promise,r)}else 1===e._i?ir(t.promise,e._j):ar(t.promise,e._j)})}(e,t)}function ir(e,t){if(t===e)return ar(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=function(e){try{return e.then}catch(e){return er=e,tr}}(t);if(n===tr)return ar(e,er);if(n===e.then&&t instanceof rr)return e._i=3,e._j=t,void ur(e);if("function"==typeof n)return void sr(n.bind(t),e)}e._i=1,e._j=t,ur(e)}function ar(e,t){e._i=2,e._j=t,rr._m&&rr._m(e,t),ur(e)}function ur(e){if(1===e._h&&(or(e,e._k),e._k=null),2===e._h){for(var t=0;t<e._k.length;t++)or(e,e._k[t]);e._k=null}}function cr(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function sr(e,t){var n=!1,r=function(e,t,n){try{e(t,n)}catch(e){return er=e,tr}}(e,function(e){n||(n=!0,ir(t,e))},function(e){n||(n=!0,ar(t,e))});n||r!==tr||(n=!0,ar(t,er))}rr._l=null,rr._m=null,rr._n=Zn,rr.prototype.then=function(e,t){if(this.constructor!==rr)return function(e,t,n){return new e.constructor(function(r,o){var i=new rr(Zn);i.then(r,o),or(e,new cr(t,n,i))})}(this,e,t);var n=new rr(Zn);return or(this,new cr(e,t,n)),n},nr.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})},nr.prototype.finally=function(e){return this.then(function(t){return nr.resolve(e()).then(function(){return t})},function(t){return nr.resolve(e()).then(function(){throw t})})};var fr=dr(!0),lr=dr(!1),pr=dr(null),vr=dr(void 0),yr=dr(0),hr=dr("");function dr(e){var t=new nr(nr._n);return t._i=1,t._j=e,t}nr.resolve=function(e){if(e instanceof nr)return e;if(null===e)return pr;if(void 0===e)return vr;if(!0===e)return fr;if(!1===e)return lr;if(0===e)return yr;if(""===e)return hr;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new nr(t.bind(e))}catch(e){return new nr(function(t,n){n(e)})}return dr(e)},nr.all=function(e){var t=Array.prototype.slice.call(e);return new nr(function(e,n){if(0===t.length)return e([]);var r=t.length;function o(i,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof nr&&a.then===nr.prototype.then){for(;3===a._i;)a=a._j;return 1===a._i?o(i,a._j):(2===a._i&&n(a._j),void a.then(function(e){o(i,e)},n))}var u=a.then;if("function"==typeof u)return void new nr(u.bind(a)).then(function(e){o(i,e)},n)}t[i]=a,0==--r&&e(t)}for(var i=0;i<t.length;i++)o(i,t[i])})},nr.reject=function(e){return new nr(function(t,n){n(e)})},nr.race=function(e){return new nr(function(t,n){e.forEach(function(e){nr.resolve(e).then(t,n)})})},nr.prototype.catch=function(e){return this.then(null,e)};var mr=[],gr=function(e){var t;t=mr.length?mr.pop():new br;t.task=e,t.domain=process.domain,Bn(t)};function br(){this.task=null,this.domain=null}br.prototype.call=function(){this.domain&&this.domain.enter();var e=!0;try{this.task.call(),e=!1,this.domain&&this.domain.exit()}finally{e&&Bn.requestFlush(),this.task=null,this.domain=null,mr.push(this)}},nr.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?function(e,t){for(var n=[],r=0;r<t;r++)n.push("a"+r);var o=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([wr]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(nr,e)}(e,t):function(e){for(var t=Math.max(e.length-1,3),n=[],r=0;r<t;r++)n.push("a"+r);var o=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+wr+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(nr,e)}(e)};var wr="function (err, res) {if (err) { rj(err); } else { rs(res); }}";nr.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(e){if(null==n)return new nr(function(t,n){n(e)});gr(function(){n.call(r,e)})}}},nr.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(n){gr(function(){e.call(t,null,n)})},function(n){gr(function(){e.call(t,n)})})},nr.enableSynchronous=function(){nr.prototype.isPending=function(){return 0==this.getState()},nr.prototype.isFulfilled=function(){return 1==this.getState()},nr.prototype.isRejected=function(){return 2==this.getState()},nr.prototype.getValue=function(){if(3===this._i)return this._j.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._j},nr.prototype.getReason=function(){if(3===this._i)return this._j.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._j},nr.prototype.getState=function(){return 3===this._i?this._j.getState():-1===this._i||-2===this._i?0:this._i}},nr.disableSynchronous=function(){nr.prototype.isPending=void 0,nr.prototype.isFulfilled=void 0,nr.prototype.isRejected=void 0,nr.prototype.getValue=void 0,nr.prototype.getReason=void 0,nr.prototype.getState=void 0};var _r=nr,jr=function(e){function t(){var e;return dn(this,t),e=_n(this,jn(t).call(this)),Or.set(wn(e),{writable:!0,value:{}}),Sr.set(wn(e),{writable:!0,value:[]}),kr.set(wn(e),{writable:!0,value:[]}),Er.set(wn(e),{writable:!0,value:[]}),e}return Sn(t,Cn),gn(t,[{key:"config",value:function(){}},{key:"queue",value:function(){}},{key:"use",value:function(){}},{key:"getToken",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefresh:!1,withCredentials:!0};e.isRefresh,e.withCredentials}},{key:"getUserInfo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.rawData,e.signature,e.encryptedData,e.iv}},{key:"addEventListener",value:function(){}}]),t}(),Or=new WeakMap,Sr=new WeakMap,kr=new WeakMap,Er=new WeakMap,xr="MINI_AUTH:token:",Pr="".concat(xr,"beforeRefresh"),Cr="".concat(xr,"afterRefresh"),Tr="".concat(xr,"beforeCache"),Mr="".concat(xr,"afterCache"),Ar="".concat(xr,"expired"),Rr="".concat(xr,"beforeLogin"),Lr="".concat(xr,"afterLogin"),Dr="".concat(xr,"beforeRequest"),Nr="".concat(xr,"afterRequest"),Ir="".concat(xr,"wx:beforeLogin"),Fr="".concat(xr,"wx:successLogin"),$r="".concat(xr,"wx:failLogin"),qr="".concat(xr,"wx:beforeRequest"),zr="".concat(xr,"wx:successRequest"),Wr="".concat(xr,"wx:failRequest"),Vr="".concat(xr,"ali:beforeLogin"),Ur="".concat(xr,"ali:successLogin"),Br="".concat(xr,"ali:failLogin"),Gr="".concat(xr,"ali:beforeRequest"),Jr="".concat(xr,"ali:successRequest"),Hr="".concat(xr,"ali:failRequest");function Qr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.errCode||0;return{errCode:e.errCode||0,errMsg:0===t?"":e.errMsg||JSON.stringify(e),status:e.statusCode||e.status||-1,headers:e.header||null,data:e.data||null}}var Yr=function(){function e(){dn(this,e),kn(this,"context",{}),kn(this,"middleware",[])}return gn(e,[{key:"createContext",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Object.create(this.context);return Object.assign(t,e)}},{key:"dispatch",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=this.createContext(e),r=this.runMiddleware(t||this.middleware);return r(n)}},{key:"runMiddleware",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return function(t,n){var r=-1;return new _r(function(o,i){!function a(u,c){if(u<=r)return i(Qr({errCode:5004,errMsg:"next() called multiple times"}));if(c)return i(c);var s=e[r=u];if(r===e.length&&(s=n),!s)return o(t);try{return s(t,a.bind(null,r+1))}catch(e){return i(Qr({errCode:5005,errMsg:JSON.stringify(e)}))}}(0,null)})}}},{key:"use",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};if("function"!=typeof e)throw new Error("middle must be function!");this.middleware.push(e)}},{key:"useBatch",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];t.forEach(function(t){e.use(t)})}}]),e}();var Kr={timeout:2e4,scopes:["auth_base"],force:!0};function Xr(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"noName",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};e&&"function"==typeof e.emit&&e.emit(t,n)}function Zr(){return"undefined"!=typeof wx&&wx?wx:"undefined"!=typeof my&&my?my:"undefined"!=typeof swan&&swan?swan:"undefined"!=typeof tt&&tt?tt:global}var eo=Zr();function to(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},t=e.timeout,n=e.env,r=e.scopes,o=e.force,i=e.self,a=null;switch(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};vn.checkPropTypes({timeout:vn.number,scopes:vn.array,force:vn.bool},e)}(Ut(Kr,{timeout:t,scopes:r,force:o})),n){case"aliapp":a=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{scopes:["auth_base"]},t=e.scopes,n=e.self;return new _r(function(e,r){eo.getAuthCode({scopes:t,success:function(t){e({errCode:0,errMsg:"",jsCode:t.authCode}),Xr(n,Ur,{res:t})},fail:function(e){r({errCode:5009,errMsg:e.errMsg||JSON.stringify(e),jsCode:""}),Xr(n,Br,{err:e})}}),Xr(n,Vr,{scopes:t})})}({scopes:r,self:i});break;case"swan":case"ttapp":case"weapp":default:a=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{timeout:2e4},t=e.timeout,n=e.self;return new _r(function(e,r){wx.login({timeout:t,success:function(t){e({errCode:0,errMsg:"",jsCode:t.code}),Xr(n,Fr,{res:t})},fail:function(e){r({errCode:5e3,errMsg:e.errMsg||JSON.stringify(e),jsCode:""}),Xr(n,$r,{err:e})}}),Xr(n,Ir,{timeout:t})})}({timeout:t,self:i})}return a}var no={url:"",data:{},headers:{},timeout:3e4,method:"GET"};function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oo(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?ro(t,!0).forEach(function(n){kn(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ro(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}function io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ao(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?io(t,!0).forEach(function(n){kn(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):io(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}var uo=Zr();function co(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},t=e.url,n=e.timeout,r=e.data,o=e.headers,i=e.method,a=e.env,u=e.self,c=null;switch(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};vn.checkPropTypes({url:vn.string,data:vn.object,headers:vn.object,timeout:vn.number,method:vn.string},e)}(Ut(no,{url:t,timeout:n,data:r,headers:o,method:i})),a){case"aliapp":c=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{method:"GET",data:{}},t=e.url,n=e.data,r=e.headers,o=e.method,i=e.timeout,a=e.self;return new _r(function(e,u){uo.request({url:t,data:n,headers:r,method:o,timeout:i,success:function(t){e(Qr(ao({errCode:0},t))),Xr(a,Jr,{res:t})},fail:function(e){var t=5006;t=e.errMsg?-1<e.errMsg.toLowerCase().indexOf("timeout")?5007:5008:5006,u(Qr(ao({errCode:t},e))),Xr(a,Hr,{err:e})}}),Xr(a,Gr,{url:t,data:n,headers:r,method:o,timeout:i})})}({self:u,url:t,data:r,headers:o,method:i});break;case"swan":case"ttapp":case"weapp":default:c=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{method:"GET",data:{}},t=e.url,n=e.data,r=e.headers,o=e.method,i=e.self;return new _r(function(e,a){wx.request({url:t,data:n,header:r,method:o,success:function(t){e(Qr(oo({errCode:0},t))),Xr(i,zr,{res:t})},fail:function(e){var t=5003;t=e.errMsg?-1<e.errMsg.toLowerCase().indexOf("timeout")?5001:5002:5003,a(Qr(oo({errCode:t},e))),Xr(i,Wr,{err:e})}}),Xr(i,qr,{url:t,data:n,headers:r,method:o})})}({self:u,url:t,data:r,headers:o,method:i})}return c}var so=Zr(),fo={setStorageSync:so.setStorageSync.bind(so),getStorageSync:so.getStorageSync.bind(so),removeStorageSync:so.removeStorageSync.bind(so)},lo=Zr(),po={setStorageSync:lo.setStorageSync.bind(lo),getStorageSync:lo.getStorageSync.bind(lo),removeStorageSync:lo.removeStorageSync.bind(lo)};function vo(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"}).env;return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";try{switch(e){case"aliapp":po.setStorageSync({key:t,data:n});break;case"swan":case"ttapp":case"weapp":default:fo.setStorageSync(t,n)}}catch(e){throw e}}}function yo(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"}).env;return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=null;try{switch(e){case"aliapp":n=po.getStorageSync({key:t}).data;break;case"swan":case"ttapp":case"weapp":default:n=fo.getStorageSync(t)}}catch(e){throw e}return n}}function ho(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"}).env;return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{switch(e){case"aliapp":po.removeStorageSync({key:t});break;case"swan":case"ttapp":case"weapp":default:fo.removeStorageSync(t)}}catch(e){throw e}}}function mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function go(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?mo(t,!0).forEach(function(n){kn(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mo(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))});return e}function bo(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var wo=function(e){function t(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return dn(this,t),e=_n(this,jn(t).call(this)),Co.add(wn(e)),Po.add(wn(e)),_o.set(wn(e),{writable:!0,value:{}}),jo.set(wn(e),{writable:!0,value:[]}),Oo.set(wn(e),{writable:!0,value:[]}),So.set(wn(e),{writable:!0,value:[]}),ko.set(wn(e),{writable:!0,value:[]}),Eo.set(wn(e),{writable:!0,value:68e5}),xo.set(wn(e),{writable:!0,value:!1}),kn(wn(e),"tokenReqData",{}),kn(wn(e),"tokenResData",{}),e.middleware=new Yr,xn(wn(e),_o,n),e}return Sn(t,jr),gn(t,[{key:"use",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};if("function"==typeof t)switch(e){case"afterToken":En(this,So).push(t);break;case"user":En(this,ko).push(t);break;case"token":default:En(this,Oo).push(t)}}},{key:"set2Storage",value:function(){function e(t){try{vo({env:En(this,_o).env})(r.key,r.data)}catch(n){console.error(n),0<t&&e.call(this,t-1)}return r.data}var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=bo(this,Co,Mo).call(this,t,n);return e.call(this,3)}},{key:"getDataFromStorage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token",t=null;try{t=yo({env:En(this,_o).env})(bo(this,Po,To).call(this,e))}catch(e){console.error(e)}return t}},{key:"clearStorage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token";try{ho({env:En(this,_o).env})(bo(this,Po,To).call(this,e))}catch(e){console.error(e)}}},{key:"isExpired",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e){var t=e.expirationTime;return!(t&&t>Date.now())}return!0}},{key:"setTokenExpires",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;(!e||isNaN(e))&&(e=68e5),xn(this,Eo,+e)}},{key:"runQueues",value:function(e,t){if(En(this,jo)&&Array.isArray(En(this,jo))){var n=En(this,jo).length;En(this,jo).splice(0,n).forEach(function(n){var r=n.resolve,o=n.reject;return e?o(e):r(t)})}}},{key:"getToken",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefresh:!1},n=t.isRefresh,r=t.scopes;return new _r(function(t,o){if(En(e,xo))return En(e,jo).push({resolve:t,reject:o});var i=En(e,_o).env,a=En(e,_o).tokenReqConfig,u=a.url,c=a.headers,s=a.method,f=null;if(n)e.emit(Pr),e.clearStorage("token"),e.emit(Cr);else{if((f=e.getDataFromStorage("token"))&&!e.isExpired(f))return e.emit(Tr,f),setTimeout(function(){t(f),e.emit(Mr,f)});e.emit(Ar),e.clearStorage("token")}e.emit(Rr),xn(e,xo,!0),to({self:e,env:i,scopes:r}).then(function(t){return e.tokenReqData.jsCode=t.jsCode,e.emit(Lr,t),e.middleware.dispatch(e,En(e,Oo))}).then(function(t){return e.emit(Dr),co({self:e,env:i,url:u,method:s,headers:c||En(e,_o).headers,data:go({},t.tokenReqData)})}).then(function(t){return e.tokenResData=t,e.middleware.dispatch(e,En(e,So))}).then(function(t){return e.emit(Nr,t.tokenResData),e.set2Storage("token",t.tokenResData)}).then(function(n){t(n),e.runQueues(null,n),xn(e,xo,!1),xn(e,jo,[])}).catch(function(t){o(t),e.runQueues(t),xn(e,xo,!1),xn(e,jo,[])})})}},{key:"config",get:function(){return En(this,_o)}},{key:"queue",get:function(){return this.waitQueues}}]),t}(),_o=new WeakMap,jo=new WeakMap,Oo=new WeakMap,So=new WeakMap,ko=new WeakMap,Eo=new WeakMap,xo=new WeakMap,Po=new WeakSet,Co=new WeakSet,To=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token";return"MINI_AUTH:".concat(e,":").concat(En(this,_o).appid)},Mo=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return{key:bo(this,Po,To).call(this,e),data:{data:t,expires:En(this,Eo),expirationTime:Date.now()+En(this,Eo)}}},Ao={withCredentials:!1,env:"weapp",appid:"mockAppid",tokenReqConfig:{url:"",method:"GET",headers:{"content-type":"application/json"},timeout:1e4},userInfoReqConfig:{url:"",method:"GET",headers:{"content-type":"application/json"},timeout:1e4}};function Ro(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Ut(Ao,e);return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};vn.checkPropTypes({withCredentials:vn.bool.isRequired,env:vn.oneOf(yn),appid:vn.string,tokenReqConfig:vn.shape({url:vn.string,method:vn.oneOf(hn).isRequired,headers:vn.object,timeout:vn.number}),userInfoReqConfig:vn.shape({url:vn.string,method:vn.oneOf(hn).isRequired,headers:vn.object,timeout:vn.number})},e)}(t),new wo(t)}var Lo=Ro(Ao);Lo.create=Ro,e.default=wo,e.miniAuth=Lo,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mini-auth.min.js.map
