!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,function(){var n=e["mini-auth"],r=e["mini-auth"]={};t(r),r.noConflict=function(){return e["mini-auth"]=n,r}}())}(this,(function(e){"use strict";var t=function(){this.__data__=[],this.size=0};var n=function(e,t){return e===t||e!=e&&t!=t};var r=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1},o=Array.prototype.splice;var i=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)};var a=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]};var u=function(e){return r(this.__data__,e)>-1};var c=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=t,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=u,s.prototype.set=c;var f=s;var l=function(){this.__data__=new f,this.size=0};var p=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var v=function(e){return this.__data__.get(e)};var y=function(e){return this.__data__.has(e)},h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function m(e,t){return e(t={exports:{}},t.exports),t.exports}var g="object"==typeof h&&h&&h.Object===Object&&h,b="object"==typeof self&&self&&self.Object===Object&&self,w=g||b||Function("return this")(),_=w.Symbol,j=Object.prototype,O=j.hasOwnProperty,S=j.toString,k=_?_.toStringTag:void 0;var E=function(e){var t=O.call(e,k),n=e[k];try{e[k]=void 0;var r=!0}catch(e){}var o=S.call(e);return r&&(t?e[k]=n:delete e[k]),o},x=Object.prototype.toString;var P=function(e){return x.call(e)},C=_?_.toStringTag:void 0;var T=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":C&&C in Object(e)?E(e):P(e)};var M=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var R,A=function(e){if(!M(e))return!1;var t=T(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},L=w["__core-js_shared__"],D=(R=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"";var N=function(e){return!!D&&D in e},I=Function.prototype.toString;var F=function(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""},$=/^\[object .+?Constructor\]$/,q=Function.prototype,z=Object.prototype,W=q.toString,V=z.hasOwnProperty,U=RegExp("^"+W.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var B=function(e){return!(!M(e)||N(e))&&(A(e)?U:$).test(F(e))};var G=function(e,t){return null==e?void 0:e[t]};var J=function(e,t){var n=G(e,t);return B(n)?n:void 0},H=J(w,"Map"),Q=J(Object,"create");var Y=function(){this.__data__=Q?Q(null):{},this.size=0};var K=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},X=Object.prototype.hasOwnProperty;var Z=function(e){var t=this.__data__;if(Q){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return X.call(t,e)?t[e]:void 0},ee=Object.prototype.hasOwnProperty;var te=function(e){var t=this.__data__;return Q?void 0!==t[e]:ee.call(t,e)};var ne=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Q&&void 0===t?"__lodash_hash_undefined__":t,this};function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}re.prototype.clear=Y,re.prototype.delete=K,re.prototype.get=Z,re.prototype.has=te,re.prototype.set=ne;var oe=re;var ie=function(){this.size=0,this.__data__={hash:new oe,map:new(H||f),string:new oe}};var ae=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var ue=function(e,t){var n=e.__data__;return ae(t)?n["string"==typeof t?"string":"hash"]:n.map};var ce=function(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t};var se=function(e){return ue(this,e).get(e)};var fe=function(e){return ue(this,e).has(e)};var le=function(e,t){var n=ue(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pe.prototype.clear=ie,pe.prototype.delete=ce,pe.prototype.get=se,pe.prototype.has=fe,pe.prototype.set=le;var ve=pe;var ye=function(e,t){var n=this.__data__;if(n instanceof f){var r=n.__data__;if(!H||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ve(r)}return n.set(e,t),this.size=n.size,this};function he(e){var t=this.__data__=new f(e);this.size=t.size}he.prototype.clear=l,he.prototype.delete=p,he.prototype.get=v,he.prototype.has=y,he.prototype.set=ye;var de=he,me=function(){try{var e=J(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var ge=function(e,t,n){"__proto__"==t&&me?me(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var be=function(e,t,r){(void 0!==r&&!n(e[t],r)||void 0===r&&!(t in e))&&ge(e,t,r)};var we=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),u=a.length;u--;){var c=a[e?u:++o];if(!1===n(i[c],c,i))break}return t}}(),_e=m((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?w.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}})),je=w.Uint8Array;var Oe=function(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t};var Se=function(e,t){var n=t?Oe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var ke=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Ee=Object.create,xe=function(){function e(){}return function(t){if(!M(t))return{};if(Ee)return Ee(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var Pe=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),Ce=Object.prototype;var Te=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ce)};var Me=function(e){return"function"!=typeof e.constructor||Te(e)?{}:xe(Pe(e))};var Re=function(e){return null!=e&&"object"==typeof e};var Ae=function(e){return Re(e)&&"[object Arguments]"==T(e)},Le=Object.prototype,De=Le.hasOwnProperty,Ne=Le.propertyIsEnumerable,Ie=Ae(function(){return arguments}())?Ae:function(e){return Re(e)&&De.call(e,"callee")&&!Ne.call(e,"callee")},Fe=Array.isArray;var $e=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var qe=function(e){return null!=e&&$e(e.length)&&!A(e)};var ze=function(e){return Re(e)&&qe(e)};var We=function(){return!1},Ve=m((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?w.Buffer:void 0,i=(o?o.isBuffer:void 0)||We;e.exports=i})),Ue=Function.prototype,Be=Object.prototype,Ge=Ue.toString,Je=Be.hasOwnProperty,He=Ge.call(Object);var Qe=function(e){if(!Re(e)||"[object Object]"!=T(e))return!1;var t=Pe(e);if(null===t)return!0;var n=Je.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ge.call(n)==He},Ye={};Ye["[object Float32Array]"]=Ye["[object Float64Array]"]=Ye["[object Int8Array]"]=Ye["[object Int16Array]"]=Ye["[object Int32Array]"]=Ye["[object Uint8Array]"]=Ye["[object Uint8ClampedArray]"]=Ye["[object Uint16Array]"]=Ye["[object Uint32Array]"]=!0,Ye["[object Arguments]"]=Ye["[object Array]"]=Ye["[object ArrayBuffer]"]=Ye["[object Boolean]"]=Ye["[object DataView]"]=Ye["[object Date]"]=Ye["[object Error]"]=Ye["[object Function]"]=Ye["[object Map]"]=Ye["[object Number]"]=Ye["[object Object]"]=Ye["[object RegExp]"]=Ye["[object Set]"]=Ye["[object String]"]=Ye["[object WeakMap]"]=!1;var Ke=function(e){return Re(e)&&$e(e.length)&&!!Ye[T(e)]};var Xe=function(e){return function(t){return e(t)}},Ze=m((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&g.process,i=function(){try{var e=r&&r.require&&r.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i})),et=Ze&&Ze.isTypedArray,nt=et?Xe(et):Ke;var rt=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},ot=Object.prototype.hasOwnProperty;var it=function(e,t,r){var o=e[t];ot.call(e,t)&&n(o,r)&&(void 0!==r||t in e)||ge(e,t,r)};var at=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var u=t[i],c=r?r(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),o?ge(n,u,c):it(n,u,c)}return n};var ut=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},ct=/^(?:0|[1-9]\d*)$/;var st=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ct.test(e))&&e>-1&&e%1==0&&e<t},ft=Object.prototype.hasOwnProperty;var lt=function(e,t){var n=Fe(e),r=!n&&Ie(e),o=!n&&!r&&Ve(e),i=!n&&!r&&!o&&nt(e),a=n||r||o||i,u=a?ut(e.length,String):[],c=u.length;for(var s in e)!t&&!ft.call(e,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||st(s,c))||u.push(s);return u};var pt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},vt=Object.prototype.hasOwnProperty;var yt=function(e){if(!M(e))return pt(e);var t=Te(e),n=[];for(var r in e)("constructor"!=r||!t&&vt.call(e,r))&&n.push(r);return n};var ht=function(e){return qe(e)?lt(e,!0):yt(e)};var dt=function(e){return at(e,ht(e))};var mt=function(e,t,n,r,o,i,a){var u=rt(e,n),c=rt(t,n),s=a.get(c);if(s)be(e,n,s);else{var f=i?i(u,c,n+"",e,t,a):void 0,l=void 0===f;if(l){var p=Fe(c),v=!p&&Ve(c),y=!p&&!v&&nt(c);f=c,p||v||y?Fe(u)?f=u:ze(u)?f=ke(u):v?(l=!1,f=_e(c,!0)):y?(l=!1,f=Se(c,!0)):f=[]:Qe(c)||Ie(c)?(f=u,Ie(u)?f=dt(u):M(u)&&!A(u)||(f=Me(c))):l=!1}l&&(a.set(c,f),o(f,c,r,i,a),a.delete(c)),be(e,n,f)}};var gt=function e(t,n,r,o,i){t!==n&&we(n,(function(a,u){if(i||(i=new de),M(a))mt(t,n,u,r,e,o,i);else{var c=o?o(rt(t,u),a,u+"",t,n,i):void 0;void 0===c&&(c=a),be(t,u,c)}}),ht)};var bt=function(e){return e};var wt=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},_t=Math.max;var jt=function(e,t,n){return t=_t(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=_t(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=r[o];return u[t]=n(a),wt(e,this,u)}};var Ot=function(e){return function(){return e}},St=me?function(e,t){return me(e,"toString",{configurable:!0,enumerable:!1,value:Ot(t),writable:!0})}:bt,kt=Date.now;var Et=function(e){var t=0,n=0;return function(){var r=kt(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(St);var xt=function(e,t){return Et(jt(e,t,bt),e+"")};var Pt=function(e,t,r){if(!M(r))return!1;var o=typeof t;return!!("number"==o?qe(r)&&st(t,r.length):"string"==o&&t in r)&&n(r[t],e)};var Ct=function(e){return xt((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&Pt(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,i)}return t}))}((function(e,t,n){gt(e,t,n)})),Tt=m((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,l=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,v=n?Symbol.for("react.suspense"):60113,y=n?Symbol.for("react.memo"):60115,h=n?Symbol.for("react.lazy"):60116;function d(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case f:case l:case i:case u:case a:case v:return e;default:switch(e=e&&e.$$typeof){case s:case p:case c:return e;default:return t}}case h:case y:case o:return t}}}function m(e){return d(e)===l}t.typeOf=d,t.AsyncMode=f,t.ConcurrentMode=l,t.ContextConsumer=s,t.ContextProvider=c,t.Element=r,t.ForwardRef=p,t.Fragment=i,t.Lazy=h,t.Memo=y,t.Portal=o,t.Profiler=u,t.StrictMode=a,t.Suspense=v,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===l||e===u||e===a||e===v||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===y||e.$$typeof===c||e.$$typeof===s||e.$$typeof===p)},t.isAsyncMode=function(e){return m(e)||d(e)===f},t.isConcurrentMode=m,t.isContextConsumer=function(e){return d(e)===s},t.isContextProvider=function(e){return d(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return d(e)===p},t.isFragment=function(e){return d(e)===i},t.isLazy=function(e){return d(e)===h},t.isMemo=function(e){return d(e)===y},t.isPortal=function(e){return d(e)===o},t.isProfiler=function(e){return d(e)===u},t.isStrictMode=function(e){return d(e)===a},t.isSuspense=function(e){return d(e)===v}}));d(Tt);Tt.typeOf,Tt.AsyncMode,Tt.ConcurrentMode,Tt.ContextConsumer,Tt.ContextProvider,Tt.Element,Tt.ForwardRef,Tt.Fragment,Tt.Lazy,Tt.Memo,Tt.Portal,Tt.Profiler,Tt.StrictMode,Tt.Suspense,Tt.isValidElementType,Tt.isAsyncMode,Tt.isConcurrentMode,Tt.isContextConsumer,Tt.isContextProvider,Tt.isElement,Tt.isForwardRef,Tt.isFragment,Tt.isLazy,Tt.isMemo,Tt.isPortal,Tt.isProfiler,Tt.isStrictMode,Tt.isSuspense;var Mt=m((function(e,t){"production"!==process.env.NODE_ENV&&function(){Object.defineProperty(t,"__esModule",{value:!0});var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,s=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,v=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116;var h=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i="Warning: "+e.replace(/%s/g,(function(){return n[o++]}));"undefined"!=typeof console&&console.warn(i);try{throw new Error(i)}catch(e){}},d=function(e,t){if(void 0===t)throw new Error("`lowPriorityWarning(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];h.apply(void 0,[t].concat(r))}};function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var h=e.type;switch(h){case s:case f:case o:case a:case i:case p:return h;default:var d=h&&h.$$typeof;switch(d){case c:case l:case u:return d;default:return t}}case y:case v:case r:return t}}}var g=s,b=f,w=c,_=u,j=n,O=l,S=o,k=y,E=v,x=r,P=a,C=i,T=p,M=!1;function R(e){return m(e)===f}t.typeOf=m,t.AsyncMode=g,t.ConcurrentMode=b,t.ContextConsumer=w,t.ContextProvider=_,t.Element=j,t.ForwardRef=O,t.Fragment=S,t.Lazy=k,t.Memo=E,t.Portal=x,t.Profiler=P,t.StrictMode=C,t.Suspense=T,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===f||e===a||e===i||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===l)},t.isAsyncMode=function(e){return M||(M=!0,d(!1,"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),R(e)||m(e)===s},t.isConcurrentMode=R,t.isContextConsumer=function(e){return m(e)===c},t.isContextProvider=function(e){return m(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return m(e)===l},t.isFragment=function(e){return m(e)===o},t.isLazy=function(e){return m(e)===y},t.isMemo=function(e){return m(e)===v},t.isPortal=function(e){return m(e)===r},t.isProfiler=function(e){return m(e)===a},t.isStrictMode=function(e){return m(e)===i},t.isSuspense=function(e){return m(e)===p}}()}));d(Mt);Mt.typeOf,Mt.AsyncMode,Mt.ConcurrentMode,Mt.ContextConsumer,Mt.ContextProvider,Mt.Element,Mt.ForwardRef,Mt.Fragment,Mt.Lazy,Mt.Memo,Mt.Portal,Mt.Profiler,Mt.StrictMode,Mt.Suspense,Mt.isValidElementType,Mt.isAsyncMode,Mt.isConcurrentMode,Mt.isContextConsumer,Mt.isContextProvider,Mt.isElement,Mt.isForwardRef,Mt.isFragment,Mt.isLazy,Mt.isMemo,Mt.isPortal,Mt.isProfiler,Mt.isStrictMode,Mt.isSuspense;var Rt=m((function(e){"production"===process.env.NODE_ENV?e.exports=Tt:e.exports=Mt})),At=Object.getOwnPropertySymbols,Lt=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable;function Nt(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var It=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=Nt(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))Lt.call(n,a)&&(o[a]=n[a]);if(At){r=At(n);for(var u=0;u<r.length;u++)Dt.call(n,r[u])&&(o[r[u]]=n[r[u]])}}return o},Ft="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$t=function(){};if("production"!==process.env.NODE_ENV){var qt=Ft,zt={},Wt=Function.call.bind(Object.prototype.hasOwnProperty);$t=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function Vt(e,t,n,r,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(Wt(e,i)){var a;try{if("function"!=typeof e[i]){var u=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.");throw u.name="Invariant Violation",u}a=e[i](t,i,r,n,null,qt)}catch(e){a=e}if(!a||a instanceof Error||$t((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof a+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),a instanceof Error&&!(a.message in zt)){zt[a.message]=!0;var c=o?o():"";$t("Failed "+n+" type: "+a.message+(null!=c?c:""))}}}Vt.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(zt={})};var Ut=Vt,Bt=Function.call.bind(Object.prototype.hasOwnProperty),Gt=function(){};function Jt(){return null}"production"!==process.env.NODE_ENV&&(Gt=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});var Ht=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator;var r={array:u("array"),bool:u("boolean"),func:u("function"),number:u("number"),object:u("object"),string:u("string"),symbol:u("symbol"),any:a(Jt),arrayOf:function(e){return a((function(t,n,r,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var u=t[n];if(!Array.isArray(u))return new i("Invalid "+o+" `"+a+"` of type `"+s(u)+"` supplied to `"+r+"`, expected an array.");for(var c=0;c<u.length;c++){var f=e(u,c,r,o,a+"["+c+"]",Ft);if(f instanceof Error)return f}return null}))},element:a((function(t,n,r,o,a){var u=t[n];return e(u)?null:new i("Invalid "+o+" `"+a+"` of type `"+s(u)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:a((function(e,t,n,r,o){var a=e[t];return Rt.isValidElementType(a)?null:new i("Invalid "+r+" `"+o+"` of type `"+s(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return a((function(t,n,r,o,a){if(!(t[n]instanceof e)){var u=e.name||"<<anonymous>>";return new i("Invalid "+o+" `"+a+"` of type `"+function(e){if(!e.constructor||!e.constructor.name)return"<<anonymous>>";return e.constructor.name}(t[n])+"` supplied to `"+r+"`, expected instance of `"+u+"`.")}return null}))},node:a((function(e,t,n,r,o){return c(e[t])?null:new i("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return a((function(t,n,r,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var u=t[n],c=s(u);if("object"!==c)return new i("Invalid "+o+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var f in u)if(Bt(u,f)){var l=e(u,f,r,o,a+"."+f,Ft);if(l instanceof Error)return l}return null}))},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&(arguments.length>1?Gt("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):Gt("Invalid argument supplied to oneOf, expected an array.")),Jt;function t(t,n,r,a,u){for(var c=t[n],s=0;s<e.length;s++)if(o(c,e[s]))return null;var l=JSON.stringify(e,(function(e,t){return"symbol"===f(t)?String(t):t}));return new i("Invalid "+a+" `"+u+"` of value `"+String(c)+"` supplied to `"+r+"`, expected one of "+l+".")}return a(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Gt("Invalid argument supplied to oneOfType, expected an instance of array."),Jt;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return Gt("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+l(n)+" at index "+t+"."),Jt}return a((function(t,n,r,o,a){for(var u=0;u<e.length;u++){if(null==(0,e[u])(t,n,r,o,a,Ft))return null}return new i("Invalid "+o+" `"+a+"` supplied to `"+r+"`.")}))},shape:function(e){return a((function(t,n,r,o,a){var u=t[n],c=s(u);if("object"!==c)return new i("Invalid "+o+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var f in e){var l=e[f];if(l){var p=l(u,f,r,o,a+"."+f,Ft);if(p)return p}}return null}))},exact:function(e){return a((function(t,n,r,o,a){var u=t[n],c=s(u);if("object"!==c)return new i("Invalid "+o+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var f=It({},t[n],e);for(var l in f){var p=e[l];if(!p)return new i("Invalid "+o+" `"+a+"` key `"+l+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var v=p(u,l,r,o,a+"."+l,Ft);if(v)return v}return null}))}};function o(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function i(e){this.message=e,this.stack=""}function a(e){if("production"!==process.env.NODE_ENV)var n={},r=0;function o(o,a,u,c,s,f,l){if(c=c||"<<anonymous>>",f=f||u,l!==Ft){if(t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var v=c+":"+u;!n[v]&&r<3&&(Gt("You are manually calling a React.PropTypes validation function for the `"+f+"` prop on `"+c+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[v]=!0,r++)}}return null==a[u]?o?null===a[u]?new i("The "+s+" `"+f+"` is marked as required in `"+c+"`, but its value is `null`."):new i("The "+s+" `"+f+"` is marked as required in `"+c+"`, but its value is `undefined`."):null:e(a,u,c,s,f)}var a=o.bind(null,!1);return a.isRequired=o.bind(null,!0),a}function u(e){return a((function(t,n,r,o,a,u){var c=t[n];return s(c)!==e?new i("Invalid "+o+" `"+a+"` of type `"+f(c)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function c(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(c);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!c(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!c(a[1]))return!1}return!0;default:return!1}}function s(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function f(e){if(null==e)return""+e;var t=s(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function l(e){var t=f(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return i.prototype=Error.prototype,r.checkPropTypes=Ut,r.resetWarningCache=Ut.resetWarningCache,r.PropTypes=r,r};function Qt(){}function Yt(){}Yt.resetWarningCache=Qt;var Kt=m((function(e){if("production"!==process.env.NODE_ENV){var t=Rt;e.exports=Ht(t.isElement,!0)}else e.exports=function(){function e(e,t,n,r,o,i){if(i!==Ft){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Yt,resetWarningCache:Qt};return n.PropTypes=n,n}()})),Xt=["weapp","aliapp","swan","ttapp"],Zt=["OPTIONS","options","GET","get","HEAD","head","POST","post","PUT","put","DELETE","delete","TRACE","trace","CONNECT","connect"];function en(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Kt.checkPropTypes({withCredentials:Kt.bool.isRequired,env:Kt.oneOf(Xt),appid:Kt.string,tokenReqConfig:Kt.shape({url:Kt.string,method:Kt.oneOf(Zt).isRequired,headers:Kt.object,timeout:Kt.number}),userInfoReqConfig:Kt.shape({url:Kt.string,method:Kt.oneOf(Zt).isRequired,headers:Kt.object,timeout:Kt.number})},e)}var tn=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rn=function(e,t,n){return t&&nn(e.prototype,t),n&&nn(e,n),e},on=m((function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n}));var an=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var un=function(e,t){return!t||"object"!==on(t)&&"function"!=typeof t?an(e):t},cn=m((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t})),sn=m((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t}));var fn=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)};var ln=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};var pn=function(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value};var vn=function(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n};function yn(){}function hn(){hn.init.call(this)}function dn(e){return void 0===e._maxListeners?hn.defaultMaxListeners:e._maxListeners}function mn(e,t,n){if(t)e.call(n);else for(var r=e.length,o=kn(e,r),i=0;i<r;++i)o[i].call(n)}function gn(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=kn(e,o),a=0;a<o;++a)i[a].call(n,r)}function bn(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,a=kn(e,i),u=0;u<i;++u)a[u].call(n,r,o)}function wn(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var a=e.length,u=kn(e,a),c=0;c<a;++c)u[c].call(n,r,o,i)}function _n(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=kn(e,o),a=0;a<o;++a)i[a].apply(n,r)}function jn(e,t,n,r){var o,i,a,u;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=new yn,e._eventsCount=0),a){if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=dn(e))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,u=c,"function"==typeof console.warn?console.warn(u):console.log(u)}}else a=i[t]=n,++e._eventsCount;return e}function On(e,t,n){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,n.apply(e,arguments))}return o.listener=n,o}function Sn(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function kn(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function En(){var e;hn.call(this),this.__emitError=(e=this,function(t){e.emit("error",t)})}function xn(){return new En}yn.prototype=Object.create(null),hn.EventEmitter=hn,hn.usingDomains=!1,hn.prototype.domain=void 0,hn.prototype._events=void 0,hn.prototype._maxListeners=void 0,hn.defaultMaxListeners=10,hn.init=function(){this.domain=null,hn.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new yn,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},hn.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},hn.prototype.getMaxListeners=function(){return dn(this)},hn.prototype.emit=function(e){var t,n,r,o,i,a,u,c="error"===e;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(u=this.domain,c){if(t=arguments[1],!u){if(t instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=u,t.domainThrown=!1,u.emit("error",t),!1}if(!(n=a[e]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:mn(n,f,this);break;case 2:gn(n,f,this,arguments[1]);break;case 3:bn(n,f,this,arguments[1],arguments[2]);break;case 4:wn(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];_n(n,f,this,o)}return!0},hn.prototype.addListener=function(e,t){return jn(this,e,t,!1)},hn.prototype.on=hn.prototype.addListener,hn.prototype.prependListener=function(e,t){return jn(this,e,t,!0)},hn.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,On(this,e,t)),this},hn.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,On(this,e,t)),this},hn.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new yn:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new yn,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o);r.removeListener&&this.emit("removeListener",e,a||t)}return this},hn.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new yn,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new yn:delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new yn,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},hn.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},hn.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Sn.call(e,t)},hn.prototype.listenerCount=Sn,hn.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},("function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e})(En,hn),En.prototype.add=function(e){e.on("error",this.__emitError)},En.prototype.remove=function(e){e.removeListener("error",this.__emitError)},En.prototype.bind=function(e){var t=this.__emitError;return function(){var n=Array.prototype.slice.call(arguments);try{e.apply(null,n)}catch(e){t(e)}}},En.prototype.intercept=function(e){var t=this.__emitError;return function(n){if(n)t(n);else{var r=Array.prototype.slice.call(arguments,1);try{e.apply(null,r)}catch(n){t(n)}}}},En.prototype.run=function(e){var t=this.__emitError;try{e()}catch(e){t(e)}return this},En.prototype.dispose=function(){return this.removeAllListeners(),this},En.prototype.enter=En.prototype.exit=function(){return this};var Pn,Cn={Domain:En,createDomain:xn,create:xn},Tn="function"==typeof setImmediate,Mn=Rn;function Rn(e){An.length||(In(),Ln=!0),An[An.length]=e}var An=[],Ln=!1,Dn=0;function Nn(){for(;Dn<An.length;){var e=Dn;if(Dn+=1,An[e].call(),Dn>1024){for(var t=0,n=An.length-Dn;t<n;t++)An[t]=An[t+Dn];An.length-=Dn,Dn=0}}An.length=0,Dn=0,Ln=!1}function In(){var e=process.domain;e&&(Pn||(Pn=Cn),Pn.active=process.domain=null),Ln&&Tn?setImmediate(Nn):process.nextTick(Nn),e&&(Pn.active=process.domain=e)}function Fn(){}Rn.requestFlush=In;var $n=null,qn={};var zn=Wn;function Wn(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,e!==Fn&&Hn(e,this)}function Vn(e,t){for(;3===e._i;)e=e._j;if(Wn._l&&Wn._l(e),0===e._i)return 0===e._h?(e._h=1,void(e._k=t)):1===e._h?(e._h=2,void(e._k=[e._k,t])):void e._k.push(t);!function(e,t){Mn((function(){var n=1===e._i?t.onFulfilled:t.onRejected;if(null!==n){var r=function(e,t){try{return e(t)}catch(e){return $n=e,qn}}(n,e._j);r===qn?Bn(t.promise,$n):Un(t.promise,r)}else 1===e._i?Un(t.promise,e._j):Bn(t.promise,e._j)}))}(e,t)}function Un(e,t){if(t===e)return Bn(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=function(e){try{return e.then}catch(e){return $n=e,qn}}(t);if(n===qn)return Bn(e,$n);if(n===e.then&&t instanceof Wn)return e._i=3,e._j=t,void Gn(e);if("function"==typeof n)return void Hn(n.bind(t),e)}e._i=1,e._j=t,Gn(e)}function Bn(e,t){e._i=2,e._j=t,Wn._m&&Wn._m(e,t),Gn(e)}function Gn(e){if(1===e._h&&(Vn(e,e._k),e._k=null),2===e._h){for(var t=0;t<e._k.length;t++)Vn(e,e._k[t]);e._k=null}}function Jn(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function Hn(e,t){var n=!1,r=function(e,t,n){try{e(t,n)}catch(e){return $n=e,qn}}(e,(function(e){n||(n=!0,Un(t,e))}),(function(e){n||(n=!0,Bn(t,e))}));n||r!==qn||(n=!0,Bn(t,$n))}Wn._l=null,Wn._m=null,Wn._n=Fn,Wn.prototype.then=function(e,t){if(this.constructor!==Wn)return function(e,t,n){return new e.constructor((function(r,o){var i=new Wn(Fn);i.then(r,o),Vn(e,new Jn(t,n,i))}))}(this,e,t);var n=new Wn(Fn);return Vn(this,new Jn(e,t,n)),n},zn.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,(function(e){setTimeout((function(){throw e}),0)}))},zn.prototype.finally=function(e){return this.then((function(t){return zn.resolve(e()).then((function(){return t}))}),(function(t){return zn.resolve(e()).then((function(){throw t}))}))};var Qn=tr(!0),Yn=tr(!1),Kn=tr(null),Xn=tr(void 0),Zn=tr(0),er=tr("");function tr(e){var t=new zn(zn._n);return t._i=1,t._j=e,t}zn.resolve=function(e){if(e instanceof zn)return e;if(null===e)return Kn;if(void 0===e)return Xn;if(!0===e)return Qn;if(!1===e)return Yn;if(0===e)return Zn;if(""===e)return er;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new zn(t.bind(e))}catch(e){return new zn((function(t,n){n(e)}))}return tr(e)},zn.all=function(e){var t=Array.prototype.slice.call(e);return new zn((function(e,n){if(0===t.length)return e([]);var r=t.length;function o(i,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof zn&&a.then===zn.prototype.then){for(;3===a._i;)a=a._j;return 1===a._i?o(i,a._j):(2===a._i&&n(a._j),void a.then((function(e){o(i,e)}),n))}var u=a.then;if("function"==typeof u)return void new zn(u.bind(a)).then((function(e){o(i,e)}),n)}t[i]=a,0==--r&&e(t)}for(var i=0;i<t.length;i++)o(i,t[i])}))},zn.reject=function(e){return new zn((function(t,n){n(e)}))},zn.race=function(e){return new zn((function(t,n){e.forEach((function(e){zn.resolve(e).then(t,n)}))}))},zn.prototype.catch=function(e){return this.then(null,e)};var nr=[],rr=function(e){var t;t=nr.length?nr.pop():new or;t.task=e,t.domain=process.domain,Mn(t)};function or(){this.task=null,this.domain=null}or.prototype.call=function(){this.domain&&this.domain.enter();var e=!0;try{this.task.call(),e=!1,this.domain&&this.domain.exit()}finally{e&&Mn.requestFlush(),this.task=null,this.domain=null,nr.push(this)}},zn.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?function(e,t){for(var n=[],r=0;r<t;r++)n.push("a"+r);var o=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([ir]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(zn,e)}(e,t):function(e){for(var t=Math.max(e.length-1,3),n=[],r=0;r<t;r++)n.push("a"+r);var o=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+ir+";","var res;","switch (argLength) {",n.concat(["extra"]).map((function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"})).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],o)(zn,e)}(e)};var ir="function (err, res) {if (err) { rj(err); } else { rs(res); }}";zn.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(e){if(null==n)return new zn((function(t,n){n(e)}));rr((function(){n.call(r,e)}))}}},zn.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then((function(n){rr((function(){e.call(t,null,n)}))}),(function(n){rr((function(){e.call(t,n)}))}))},zn.enableSynchronous=function(){zn.prototype.isPending=function(){return 0==this.getState()},zn.prototype.isFulfilled=function(){return 1==this.getState()},zn.prototype.isRejected=function(){return 2==this.getState()},zn.prototype.getValue=function(){if(3===this._i)return this._j.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._j},zn.prototype.getReason=function(){if(3===this._i)return this._j.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._j},zn.prototype.getState=function(){return 3===this._i?this._j.getState():-1===this._i||-2===this._i?0:this._i}},zn.disableSynchronous=function(){zn.prototype.isPending=void 0,zn.prototype.isFulfilled=void 0,zn.prototype.isRejected=void 0,zn.prototype.getValue=void 0,zn.prototype.getReason=void 0,zn.prototype.getState=void 0};var ar=zn,ur=function(e){function t(){var e;return tn(this,t),e=un(this,cn(t).call(this)),cr.set(an(e),{writable:!0,value:{}}),sr.set(an(e),{writable:!0,value:[]}),fr.set(an(e),{writable:!0,value:[]}),lr.set(an(e),{writable:!0,value:[]}),e}return fn(t,e),rn(t,[{key:"config",value:function(){}},{key:"queue",value:function(){}},{key:"use",value:function(){}},{key:"getToken",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefresh:!1,withCredentials:!0};e.isRefresh,e.withCredentials}},{key:"getUserInfo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.rawData,e.signature,e.encryptedData,e.iv}},{key:"addEventListener",value:function(){}}]),t}(hn),cr=new WeakMap,sr=new WeakMap,fr=new WeakMap,lr=new WeakMap,pr="MINI_AUTH:token:",vr="".concat(pr,"beforeRefresh"),yr="".concat(pr,"afterRefresh"),hr="".concat(pr,"beforeCache"),dr="".concat(pr,"afterCache"),mr="".concat(pr,"expired"),gr="".concat(pr,"beforeLogin"),br="".concat(pr,"afterLogin"),wr="".concat(pr,"beforeRequest"),_r="".concat(pr,"afterRequest"),jr="".concat(pr,"wx:beforeLogin"),Or="".concat(pr,"wx:successLogin"),Sr="".concat(pr,"wx:failLogin"),kr="".concat(pr,"wx:beforeRequest"),Er="".concat(pr,"wx:successRequest"),xr="".concat(pr,"wx:failRequest"),Pr="".concat(pr,"ali:beforeLogin"),Cr="".concat(pr,"ali:successLogin"),Tr="".concat(pr,"ali:failLogin"),Mr="".concat(pr,"ali:beforeRequest"),Rr="".concat(pr,"ali:successRequest"),Ar="".concat(pr,"ali:failRequest");function Lr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.errCode||0;return{errCode:e.errCode||0,errMsg:0===t?"":e.errMsg||JSON.stringify(e),status:e.statusCode||e.status||-1,headers:e.header||null,data:e.data||null}}var Dr=function(){function e(){tn(this,e),ln(this,"context",{}),ln(this,"middleware",[])}return rn(e,[{key:"createContext",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Object.create(this.context);return Object.assign(t,e)}},{key:"dispatch",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=this.createContext(e),r=this.runMiddleware(t||this.middleware);return r(n)}},{key:"runMiddleware",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return function(t,n){var r=-1;return new ar((function(o,i){!function a(u,c){if(u<=r)return i(Lr({errCode:5004,errMsg:"next() called multiple times"}));if(c)return i(c);var s=e[r=u];if(r===e.length&&(s=n),!s)return o(t);try{return s(t,a.bind(null,r+1))}catch(e){return i(Lr({errCode:5005,errMsg:JSON.stringify(e)}))}}(0,null)}))}}},{key:"use",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};if("function"!=typeof e)throw new Error("middle must be function!");this.middleware.push(e)}},{key:"useBatch",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){e.use(t)}))}}]),e}();function Nr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Kt.checkPropTypes({timeout:Kt.number,scopes:Kt.array,force:Kt.bool},e)}var Ir={timeout:2e4,scopes:["auth_base"],force:!0};function Fr(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"noName",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};e&&"function"==typeof e.emit&&e.emit(t,n)}function $r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{timeout:2e4},t=e.timeout,n=e.self;return new ar((function(e,r){wx.login({timeout:t,success:function(t){e({errCode:0,errMsg:"",jsCode:t.code}),Fr(n,Or,{res:t})},fail:function(e){r({errCode:5e3,errMsg:e.errMsg||JSON.stringify(e),jsCode:""}),Fr(n,Sr,{err:e})}}),Fr(n,jr,{timeout:t})}))}function qr(){return"undefined"!=typeof wx&&wx?wx:"undefined"!=typeof my&&my?my:"undefined"!=typeof swan&&swan?swan:"undefined"!=typeof tt&&tt?tt:global}var zr=qr();function Wr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{scopes:["auth_base"]},t=e.scopes,n=e.self;return new ar((function(e,r){zr.getAuthCode({scopes:t,success:function(t){e({errCode:0,errMsg:"",jsCode:t.authCode}),Fr(n,Cr,{res:t})},fail:function(e){r({errCode:5009,errMsg:e.errMsg||JSON.stringify(e),jsCode:""}),Fr(n,Tr,{err:e})}}),Fr(n,Pr,{scopes:t})}))}function Vr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},t=e.timeout,n=e.env,r=e.scopes,o=e.force,i=e.self,a=null;switch(Nr(Ct(Ir,{timeout:t,scopes:r,force:o})),n){case"aliapp":a=Wr({scopes:r,self:i});break;case"swan":case"ttapp":case"weapp":default:a=$r({timeout:t,self:i})}return a}function Ur(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Kt.checkPropTypes({url:Kt.string,data:Kt.object,headers:Kt.object,timeout:Kt.number,method:Kt.string},e)}var Br={url:"",data:{},headers:{},timeout:3e4,method:"GET"};function Gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jr(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?Gr(t,!0).forEach((function(n){ln(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gr(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Hr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{method:"GET",data:{}},t=e.url,n=e.data,r=e.headers,o=e.method,i=e.self;return new ar((function(e,a){wx.request({url:t,data:n,header:r,method:o,success:function(t){e(Lr(Jr({errCode:0},t))),Fr(i,Er,{res:t})},fail:function(e){var t=5003;e.errMsg?t=-1<e.errMsg.toLowerCase().indexOf("timeout")?5001:5002:t=5003;a(Lr(Jr({errCode:t},e))),Fr(i,xr,{err:e})}}),Fr(i,kr,{url:t,data:n,headers:r,method:o})}))}function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yr(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?Qr(t,!0).forEach((function(n){ln(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qr(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var Kr=qr();function Xr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{method:"GET",data:{}},t=e.url,n=e.data,r=e.headers,o=e.method,i=e.timeout,a=e.self;return new ar((function(e,u){Kr.request({url:t,data:n,headers:r,method:o,timeout:i,success:function(t){e(Lr(Yr({errCode:0},t))),Fr(a,Rr,{res:t})},fail:function(e){var t=5006;e.errMsg?t=-1<e.errMsg.toLowerCase().indexOf("timeout")?5007:5008:t=5006;u(Lr(Yr({errCode:t},e))),Fr(a,Ar,{err:e})}}),Fr(a,Mr,{url:t,data:n,headers:r,method:o,timeout:i})}))}function Zr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},t=e.url,n=e.timeout,r=e.data,o=e.headers,i=e.method,a=e.env,u=e.self,c=null;switch(Ur(Ct(Br,{url:t,timeout:n,data:r,headers:o,method:i})),a){case"aliapp":c=Xr({self:u,url:t,data:r,headers:o,method:i});break;case"swan":case"ttapp":case"weapp":default:c=Hr({self:u,url:t,data:r,headers:o,method:i})}return c}var eo=qr(),to={setStorageSync:eo.setStorageSync.bind(eo),getStorageSync:eo.getStorageSync.bind(eo),removeStorageSync:eo.removeStorageSync.bind(eo)},no=qr(),ro={setStorageSync:no.setStorageSync.bind(no),getStorageSync:no.getStorageSync.bind(no),removeStorageSync:no.removeStorageSync.bind(no)};function oo(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},t=e.env;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";try{switch(t){case"aliapp":ro.setStorageSync({key:e,data:n});break;case"swan":case"ttapp":case"weapp":default:to.setStorageSync(e,n)}}catch(e){throw e}}}function io(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},t=e.env;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=null;try{switch(t){case"aliapp":n=ro.getStorageSync({key:e}).data;break;case"swan":case"ttapp":case"weapp":default:n=to.getStorageSync(e)}}catch(e){throw e}return n}}function ao(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{env:"weapp"},t=e.env;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{switch(t){case"aliapp":ro.removeStorageSync({key:e});break;case"swan":case"ttapp":case"weapp":default:to.removeStorageSync(e)}}catch(e){throw e}}}function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function co(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?uo(t,!0).forEach((function(n){ln(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uo(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function so(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var fo=function(e){function t(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return tn(this,t),e=un(this,cn(t).call(this)),wo.add(an(e)),bo.add(an(e)),lo.set(an(e),{writable:!0,value:{}}),po.set(an(e),{writable:!0,value:[]}),vo.set(an(e),{writable:!0,value:[]}),yo.set(an(e),{writable:!0,value:[]}),ho.set(an(e),{writable:!0,value:[]}),mo.set(an(e),{writable:!0,value:68e5}),go.set(an(e),{writable:!0,value:!1}),ln(an(e),"tokenReqData",{}),ln(an(e),"tokenResData",{}),e.middleware=new Dr,vn(an(e),lo,n),e}return fn(t,e),rn(t,[{key:"use",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};if("function"==typeof t)switch(e){case"afterToken":pn(this,yo).push(t);break;case"user":pn(this,ho).push(t);break;case"token":default:pn(this,vo).push(t)}}},{key:"set2Storage",value:function(){function e(t){try{oo({env:pn(this,lo).env})(r.key,r.data)}catch(n){console.error(n),0<t&&e.call(this,t-1)}return r.data}var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=so(this,wo,jo).call(this,t,n);return e.call(this,3)}},{key:"getDataFromStorage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token",t=null;try{t=io({env:pn(this,lo).env})(so(this,bo,_o).call(this,e))}catch(e){console.error(e)}return t}},{key:"clearStorage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token";try{ao({env:pn(this,lo).env})(so(this,bo,_o).call(this,e))}catch(e){console.error(e)}}},{key:"isExpired",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e){var t=e.expirationTime;return!(t&&t>Date.now())}return!0}},{key:"setTokenExpires",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;(!e||isNaN(e))&&(e=68e5),vn(this,mo,+e)}},{key:"runQueues",value:function(e,t){if(pn(this,po)&&Array.isArray(pn(this,po))){var n=pn(this,po).length;pn(this,po).splice(0,n).forEach((function(n){var r=n.resolve,o=n.reject;return e?o(e):r(t)}))}}},{key:"setTokenReqConfig",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return null==e?null:void(pn(this,lo).tokenReqConfig[e]=t)}},{key:"getToken",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isRefresh:!1},n=t.isRefresh,r=t.scopes;return new ar((function(t,o){if(pn(e,go))return pn(e,po).push({resolve:t,reject:o});var i=pn(e,lo).env,a=pn(e,lo).tokenReqConfig,u=a.url,c=(a.headers,a.method),s=null;if(n)e.emit(vr),e.clearStorage("token"),e.emit(yr);else{if(s=e.getDataFromStorage("token"),e.emit(hr,s),s&&!e.isExpired(s))return t(s),void e.emit(dr,s);e.emit(mr,s),e.clearStorage("token")}e.emit(gr),vn(e,go,!0),Vr({self:e,env:i,scopes:r}).then((function(t){return e.tokenReqData.jsCode=t.jsCode,e.emit(br,t),e.middleware.dispatch(e,pn(e,vo))})).then((function(t){return e.emit(wr),Zr({self:e,env:i,url:u,method:c,headers:a.headers||pn(e,lo).headers,data:co({},t.tokenReqData)})})).then((function(t){return e.tokenResData=t,e.middleware.dispatch(e,pn(e,yo))})).then((function(t){return e.emit(_r,t.tokenResData),e.set2Storage("token",t.tokenResData)})).then((function(n){t(n),e.runQueues(null,n),vn(e,go,!1),vn(e,po,[])})).catch((function(t){o(t),e.runQueues(t),vn(e,go,!1),vn(e,po,[])}))}))}},{key:"config",get:function(){return pn(this,lo)}},{key:"queue",get:function(){return this.waitQueues}}]),t}(ur),lo=new WeakMap,po=new WeakMap,vo=new WeakMap,yo=new WeakMap,ho=new WeakMap,mo=new WeakMap,go=new WeakMap,bo=new WeakSet,wo=new WeakSet,_o=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token";return"MINI_AUTH:".concat(e,":").concat(pn(this,lo).appid)},jo=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"token",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return{key:so(this,bo,_o).call(this,e),data:{data:t,expires:pn(this,mo),expirationTime:Date.now()+pn(this,mo)}}},Oo={withCredentials:!1,env:"weapp",appid:"mockAppid",tokenReqConfig:{url:"",method:"GET",headers:{"content-type":"application/json"},timeout:1e4},userInfoReqConfig:{url:"",method:"GET",headers:{"content-type":"application/json"},timeout:1e4}};function So(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Ct(Oo,e);return en(t),new fo(t)}var ko=So(Oo);ko.create=So,e.default=fo,e.miniAuth=ko,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=mini-auth.min.js.map
